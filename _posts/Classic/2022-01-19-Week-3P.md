---
layout: post
meta: "Week-3"
title: "Week-3: ì œì•½ ì¶©ì¡± ë¬¸ì œ[ì—°ìŠµë¬¸ì œ]"
categories: Classic
tags: Python
---

* content
{:toc}
# ğŸ“ ì—°ìŠµë¬¸ì œ 3-1

1. *Q*

   WordSearchConstraint í´ë˜ìŠ¤ë¥¼ ìˆ˜ì •í•˜ì—¬ ì¤‘ë³µ ë‹¨ì–´ë¥¼ í—ˆìš©í•˜ëŠ” ë‹¨ì–´ ê²€ìƒ‰ì„ êµ¬í˜„í•˜ë¼.

3-1

---

# ğŸ“ ì—°ìŠµë¬¸ì œ 3-2

1. *Q*

   íšŒë¡œíŒ ë ˆì´ì•„ì›ƒ ë¬¸ì œ

ë‹¨ì–´ ê²€ìƒ‰ ë¬¸ì œ ì•Œê³ ë¦¬ì¦˜ì„ ì‘ìš©í•˜ì—¬ í•´ê²°í•  ìˆ˜ ìˆë‹¤. ê²©ìëŠ” ë¬´ì‘ìœ„ ì˜ë¬¸ì ëŒ€ì‹  ë¹ˆ ì¹¸ìœ¼ë¡œ ì±„ì›Œì§„ë‹¤. ê²½ê³„ë¥¼ ëª…í™•íˆ í‘œì‹œí•˜ê¸° ìœ„í•´ íŠ¹ìˆ˜ë¬¸ìë¥¼ ì‚¬ìš©í•œë‹¤.

```python
def generate_grid(rows:int, columns:int) -> Grid:
    return [["â–¡" for c in range(columns)] for r in range(rows)]
```

ê¸°ì¡´ ì•Œê³ ë¦¬ì¦˜ì˜ DëŠ” ë¬¸ìì—´ íƒ€ì…ìœ¼ì¸ë±ìŠ¤ì™€ ì´ì— ëŒ€ì‘í•˜ëŠ” ë¬¸ìë¡œ ê²©ìë¥¼ ì±„ìš¸ ìˆ˜ ìˆì—ˆë‹¤. 

íšŒë¡œíŒ ë ˆì´ì•„ì›ƒ ë¬¸ì œì—ì„œëŠ” **M x N** ì‚¬ê°í˜•ì˜ ì¹©ì„ ì‚¬ìš©í•œë‹¤. ì‚¬ê°í˜•ì˜ í¬ê¸°ì™€, ê²©ìíŒì— í‘œì‹œí•  ë¬¸ìë¥¼ ë‚˜íƒ€ë‚´ê¸° ìœ„í•´ íƒ€ì… Dì— ë¬¸ìì—´ ëŒ€ì‹  íŠœí”Œì„ ì‚¬ìš©í•œë‹¤.

```python
words:List[Tuple[str, int, int]] = [("A", 1, 6),
                                    ("B", 4, 4),
                                    ("C", 3, 3),
                                    ("D", 2, 2),
                                    ("E", 5, 2)]
locations:Dict[str, List[List[GridLocation]]] = {}
for word in words:
    locations[word] = generate_domain(word, grid)
```

**solution**ì„ í™”ë©´ì— í‘œì‹œí•˜ëŠ” ë°©ë²•ì„ ë³€ê²½í•œë‹¤. ê¸°ì¡´ì˜ ë°˜ì „ ìš”ì†Œ ì—­ì‹œ ì‚­ì œí•œë‹¤.

```python
solution:Optional[Dict[str, List[GridLocation]]] = csp.backtracking_search()
if solution is None:
    print("ë‹µì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!")
else:
    for word, grid_locations in solution.items():
        for element in grid_locations:
            row, col = element.row, element.column
            grid[row][col] = word[0]
    display_grid(grid)
```

ì‚¬ê°í˜•ì˜ ë°°ì¹˜ëŠ” ë‹¨ì–´ì˜ ë°°ì¹˜ë³´ë‹¤ ëœ ë³µì¡í•˜ë‹¤. í˜„ì¬ ì¢Œí‘œë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë‘ ê°œì˜ ê¸¸ì´ ë³€ìˆ˜ë¥¼ í™œìš©í•´ ê³„ì‚°í•˜ì—¬, ì‚¬ê°í˜•ì˜ í¬ê¸°ê°€ ê²©ìì˜ ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ë„ë©”ì¸ì˜ í•­ëª©ìœ¼ë¡œ ì¶”ê°€í•œë‹¤.

```python
def generate_domain(word:str, grid:Grid) -> List[List[GridLocation]]:
    domain:List[List[GridLocation]] = []
    height:int = len(grid)
    width:int = len(grid[0])
    length1:int = word[1]
    length2:int = word[2]
    for row in range(height):
        for col in range(width):
            columns:range = range(col, col + length1)
            rows:range = range(row, row + length2)
            if (col + length1 <= width) and (row + length2 <= height):
                domain.append([GridLocation(r, c) for c in columns for r in rows])
    return domain
```

ì „ì²´ ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

<u>ì—°ìŠµë¬¸ì œ 3-2.py</u>

```python
from typing import NamedTuple, List, Dict, Optional, Tuple
from csp import Constraint, CSP

Grid = List[List[str]]


class GridLocation(NamedTuple):
    row:int
    column:int


def generate_grid(rows:int, columns:int) -> Grid:
    return [["â–¡" for c in range(columns)] for r in range(rows)]

def display_grid(grid:Grid) -> None:
    for row in grid:
        print(" ".join(row))

def generate_domain(word:str, grid:Grid) -> List[List[GridLocation]]:
    domain:List[List[GridLocation]] = []
    height:int = len(grid)
    width:int = len(grid[0])
    length1:int = word[1]
    length2:int = word[2]
    for row in range(height):
        for col in range(width):
            columns:range = range(col, col + length1)
            rows:range = range(row, row + length2)
            if (col + length1 <= width) and (row + length2 <= height):
                domain.append([GridLocation(r, c) for c in columns for r in rows])
    return domain


class WordSearchConstraint(Constraint[str, List[GridLocation]]):
    def __init__(self, words:List[Tuple[str, int, int]]) -> None:
        super().__init__(words)
        self.words:List[Tuple[str, int, int]] = words

    def satisfied(self, assignment:Dict[str, List[GridLocation]]) -> bool:
        all_locations = [locs for values in assignment.values() for locs in values]
        return len(set(all_locations)) == len(all_locations)


if __name__ == "__main__":

    # V
    grid:Grid = generate_grid(9, 9)

    # D
    words:List[Tuple[str, int, int]] = [("A", 1, 6),
                                        ("B", 4, 4),
                                        ("C", 3, 3),
                                        ("D", 2, 2),
                                        ("E", 5, 2)]
    locations:Dict[str, List[List[GridLocation]]] = {}
    for word in words:
        locations[word] = generate_domain(word, grid)

    # constraint
    csp:CSP[str, List[GridLocation]] = CSP(words, locations)
    csp.add_constraint(WordSearchConstraint(words))
    
    # solution
    solution:Optional[Dict[str, List[GridLocation]]] = csp.backtracking_search()
    if solution is None:
        print("ë‹µì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!")
    else:
        for word, grid_locations in solution.items():
            for element in grid_locations:
                row, col = element.row, element.column
                grid[row][col] = word[0]
        display_grid(grid)
```

<u>terminal</u>

```
A B B B B C C C â–¡
A B B B B C C C â–¡
A B B B B C C C â–¡
A B B B B D D â–¡ â–¡
A â–¡ â–¡ â–¡ â–¡ D D â–¡ â–¡
A E E E E E â–¡ â–¡ â–¡
â–¡ E E E E E â–¡ â–¡ â–¡
â–¡ â–¡ â–¡ â–¡ â–¡ â–¡ â–¡ â–¡ â–¡
â–¡ â–¡ â–¡ â–¡ â–¡ â–¡ â–¡ â–¡ â–¡
```

![](https://github.com/B31l/B31l.github.io/blob/master/img/Classic/ex 3-2.png?raw=true)

---

# ğŸ“ ì—°ìŠµë¬¸ì œ 3-3

1. *Q*

   ìŠ¤ë„ì¿  ë¬¸ì œ



ìŠ¤ë„ì¿  ë¬¸ì œëŠ” ì¢Œí‘œ ê°œë…ì„ ì‚¬ìš©í•´ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤. ê°™ì€ í–‰, ì—´, êµ¬ì—­ì€ ì¤‘ë³µì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ” 1~9ì˜ ìˆ«ìë¡œ ì´ë£¨ì–´ì ¸ ìˆë‹¤. 

- **í–‰**: 0í–‰ ~ 8í–‰
- **ì—´**: 0ì—´ ~ 8ì—´
- **êµ¬ì—­**: 0êµ¬ì—­ ~ 8êµ¬ì—­

ê¸°ì¡´ì˜ GridLocationì„ ë³€í˜•í•œë‹¤.

```python
class GridLocation(NamedTuple):
    row:int
    column:int
    realm:int = 3 * (row // 3) + column // 3
```

realmì€ ë‚´ë¶€ì ìœ¼ë¡œ ê³„ì‚°ëœë‹¤.

KEY: GridLocation, VALUE: int ok?

3 x 3 í¬ê¸°ê°€ ì•„ë‹Œ í¼ì¦ì— ëŒ€í•´ì„œëŠ” 3, 9 ëŒ€ì‹  ìƒìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

- SIZE: êµ¬ì—­ì˜ í¬ê¸°(= 3)
- WIDTH: ìŠ¤ë„ì¿  í¼ì¦ì˜ í¬ê¸°(= 9 = math.pow(SIZE, 2))



satisfied: í˜„ì¬ GridLocationì˜ row, columnì— ëŒ€í•´

- ê°™ì€ rowë¥¼ ê°€ì§€ëŠ” ì§‘í•©ì˜ ì›ì†Œê°€ ë  ìˆ˜ ì—†ë‹¤.
- ê°™ì€ columnì„ ê°€ì§€ëŠ” ì§‘í•©ì˜ ì›ì†Œê°€ ë  ìˆ˜ ì—†ë‹¤.

- ê°™ì€ êµ¬ì—­ì— ì†í•˜ëŠ” ì§‘í•©ì˜ ì›ì†Œê°€ ë  ìˆ˜ ì—†ë‹¤.



ì˜ˆë¥¼ ë“¤ì–´ row=3, column=5ì¼ ë•Œ realm=4ì´ë‹¤

`if assignment[GridLocation[3][5]] in rows[GridLocation.row]: return False`

