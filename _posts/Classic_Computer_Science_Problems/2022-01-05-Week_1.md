---
layout: post
title: "ğŸ² (2) ì••ì¶• ì•Œê³ ë¦¬ì¦˜"
meta: "Compress & Decompresss"
categories: Classic_Computer_Science_Problems
tags: Python
---
* content
{:toc}

# ?

ì €ì¥ ê³µê°„ì´ ì œí•œë  ê²½ìš° íŒŒì¼ì„ ì••ì¶•í•  í•„ìš”ê°€ ìˆìœ¼ë©°, ì´ ë•Œ **ì••ì¶• ì•Œê³ ë¦¬ì¦˜**ì´ ì‚¬ìš©ëœë‹¤.

ë‹¤ì–‘í•œ ì••ì¶• ì•Œê³ ë¦¬ì¦˜ì´ ì¡´ì¬í•˜ì§€ë§Œ, ê¶ê·¹ì ìœ¼ë¡œëŠ” ë‹¤ìŒ ê¸°ëŠ¥ì„ êµ¬í˜„í•´ì•¼ í•œë‹¤.

- **ì••ì¶•(compress)**

  ë¶€í˜¸í™”(encoding) ê³¼ì •ì„ ê±°ì³ ì›ë³¸ íŒŒì¼ì„ ì••ì¶• íŒŒì¼ë¡œ ë³€í™˜í•œë‹¤.

- **ì••ì¶• í’€ê¸°(decomporess)**

  ë³µí˜¸í™”(decoding) ê³¼ì •ì„ ê±°ì³ ì••ì¶• íŒŒì¼ì„ ì›ë³¸ íŒŒì¼ë¡œ ë³€í™˜í•œë‹¤.

---

# **ìœ ì „ ì •ë³´ ì••ì¶•**

![nucleotide](https://cdn.pixabay.com/photo/2016/11/09/15/27/dna-1811955_960_720.jpg)

DNAëŠ” 4ê°€ì§€ ì¢…ë¥˜(A, C, G, T)ì˜ ë‰´í´ë ˆì˜¤íƒ€ì´ë“œ(nucleotide)ë¡œ êµ¬ì„±ëœë‹¤. 

ë§Œì•½ `n`ê°œì˜ ë‰´í´ë ˆì˜¤íƒ€ì´ë“œë¡œ êµ¬ì„±ëœ ì—¼ê¸°ì„œì—´ì„ ë¬¸ìì—´ë¡œ ì‘ì„±í•  ê²½ìš°, ê° ë¬¸ìì˜ í¬ê¸°ëŠ” 8ë¹„íŠ¸ì´ë¯€ë¡œ ì´ `8n`ë¹„íŠ¸ì˜ ì €ì¥ê³µê°„ì´ í•„ìš”í•˜ë‹¤. (UTF-8 ê¸°ì¤€)

| ë¬¸ì | 8bit     |
| ---- | -------- |
| A    | 01000001 |
| C    | 01000011 |
| G    | 01000111 |
| T    | 01010100 |

í•˜ì§€ë§Œ 4ê°€ì§€ ì¢…ë¥˜ì˜ ë¬¸ìë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë°ì—ëŠ” 2ê°œì˜ ë¹„íŠ¸ë§Œ ìˆì–´ë„ ì¶©ë¶„í•˜ë‹¤. 

ê° ë¬¸ìì˜ í¬ê¸°ë¥¼ 2ë¹„íŠ¸ë¡œ ì••ì¶•í•œë‹¤ë©´ í•„ìš”í•œ ì €ì¥ê³µê°„ì€`2n`ë¹„íŠ¸ë¡œ ê°ì†Œí•˜ë©°, ìµœëŒ€ 75%ì˜ ì €ì¥ ê³µê°„ì„ ì ˆì•½í•  ìˆ˜ ìˆë‹¤. 

| ë¬¸ì | 2bit |
| ---- | ---- |
| A    | 00   |
| C    | 01   |
| G    | 10   |
| T    | 11   |

ì´ ì•„ì´ë””ì–´ë¡œ ìœ ì „ ì •ë³´ë¥¼ ì••ì¶•í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ì„ ì‘ì„±í•œë‹¤.

## 1. compress

```python
def compress(gene:str) -> str:
    bit_string:int = 1
    for nucleotide in gene.upper():
        bit_string <<= 2
        if   nucleotide == "A": bit_string |= 0b00
        elif nucleotide == "C": bit_string |= 0b01
        elif nucleotide == "G": bit_string |= 0b10
        elif nucleotide == "T": bit_string |= 0b11
        else: 
            raise ValueError(f"Invalid nucleotide: { nucleotide }")
    return bit_string
```

ë‰´í´ë ˆì˜¤íƒ€ì´ë“œì˜ ìˆ˜ë§Œí¼ 2ë¹„íŠ¸ ë¬¸ìì—´ì„ ì¶”ê°€í•˜ë©°, ì¶”ê°€í•  ë•Œë§ˆë‹¤ ì‰¬í”„íŠ¸ ì—°ì‚°ì `<<`ë¥¼ ì‚¬ìš©í•´ 2ë¹„íŠ¸ì”© ì™¼ìª½ìœ¼ë¡œ ì´ë™í•œë‹¤.

ì˜ˆë¥¼ ë“¤ì–´ ë¬¸ìì—´ **ATGC**ì„ ì¸ìˆ˜ë¡œ ë„˜ê¸°ë©´, ëŒ€ì‘í•˜ëŠ” 2ë¹„íŠ¸ ë¬¸ìì—´ì„ ì´ˆê¸°ê°’ 1 ë’¤ì— ì°¨ë¡€ëŒ€ë¡œ ì¶”ê°€í•œë‹¤. 

ë¹„íŠ¸ ë‹¨ìœ„ ì—°ì‚°ì—ì„œ ë¹„íŠ¸ ì¶”ê°€ëŠ” `|=` ì—°ì‚°ìë¥¼ ì‚¬ìš©í•œë‹¤.

![](https://github.com/B31l/B31l.github.io/blob/master/img/Classic_Computer_Science_Problems/compress-01.png?raw=true)

- **In [1]**

  ```python
  from sys import getsizeof
  
  original = "ATGC"
  compressed = compress(original)
  print(f"{ original }: { getsizeof(original) }ë°”ì´íŠ¸")
  print(f"{ bin(compressed) }: { getsizeof(compressed) }ë°”ì´íŠ¸")
  ```

- **Out [1]**

  ```
  ATGC: 53ë°”ì´íŠ¸
  0b100111001: 28ë°”ì´íŠ¸
  ```


`sys.getsizeof()` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ ë°”ì´íŠ¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

> íŒŒì´ì¬ ê°ì²´ ì‹œìŠ¤í…œì˜ ë‚´ì œëœ ì˜¤ë²„í—¤ë“œ ë•Œë¬¸ì— ì €ì¥ê³µê°„ì˜ í¬ê¸°ë¥¼ 28ë°”ì´íŠ¸ ë¯¸ë§Œìœ¼ë¡œ ì¤„ì¼ ìˆ˜ëŠ” ì—†ë‹¤.

> bit_stringì˜ ì´ˆê¸°ê°’ì„ 0ìœ¼ë¡œ ì„¤ì •í•´ë„ ê´œì°®ì§€ ì•Šì„ê¹Œ? ë‹¨ìˆœíˆ ì²« ë²ˆì§¸ ìë¦¬ë§Œ 1ì—ì„œ 0ìœ¼ë¡œ ë°”ë€ ê°’ì¸ **000111001**ì„ ë°˜í™˜í•  ê²ƒì´ë¼ê³  ì˜ˆì¸¡í•  ìˆ˜ë„ ìˆë‹¤. í•˜ì§€ë§Œ ë°˜í™˜ë˜ëŠ” ê°’ì€ **111001**ì´ë‹¤. 
>
> ì´ìœ ëŠ” ê°„ë‹¨í•˜ë‹¤. bit_stringì€ ì •ìˆ˜í˜•ì´ê¸° ë•Œë¬¸ì— 0ìœ¼ë¡œ ì‹œì‘í•˜ëŠ” ì• ìë¦¿ìˆ˜ë¥¼ ëª¨ë‘ ì œê±°í•´ ë°˜í™˜í•˜ê¸° ë•Œë¬¸ì´ë‹¤. ë”°ë¼ì„œ ë³€í™˜ ì˜¤ë¥˜ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ì„œ bit_stringì˜ ì´ˆê¸°ê°’ì€ ë°˜ë“œì‹œ 1ë¡œ ì„¤ì •í•´ì•¼ í•œë‹¤. 

## 2. decompress

```python
def decompress(bit_string:str) -> str:
    gene:str = ""
    for i in range(0, bit_string.bit_length() - 1, 2):
        bits:int = bit_string >> i & 0b11
        if   bits == 0b00: gene += "A"
        elif bits == 0b01: gene += "C"
        elif bits == 0b10: gene += "G"
        elif bits == 0b11: gene += "T"
        else: 
            raise ValueError(f"Invalid bits: { bits }")
    return gene[::-1] # Reverse
```

bit_stringì˜ ë ë¶€ë¶„ë¶€í„° 2ê°œì”© ë¹„íŠ¸ ë¬¸ìì—´ì„ ì½ì€ ë’¤, ë‰´í´ë ˆì˜¤íƒ€ì´ë“œë¡œ ë³€í™˜í•œ ê°’ì„ geneì—  ì¶”ê°€í•œë‹¤. 

ì²˜ìŒ bit_stringì„ ë§Œë“¤ ë•Œ ë¹„íŠ¸ 1ë¡œ ì‹œì‘í–ˆê¸° ë•Œë¬¸ì— í•´ë‹¹ ë¹„íŠ¸ë¥¼ ì œì™¸í•´ì•¼ í•˜ë¯€ë¡œ, ì „ì²´ ê¸¸ì´ì—ì„œ 1ì„ ëº€ ê°’ë§Œí¼ ë°˜ë³µì„ ì‹œí–‰í•œë‹¤.

ë³µí˜¸í™” ê³¼ì •ì—ì„œ ì—­ìˆœìœ¼ë¡œ ì½ì—ˆê¸° ë•Œë¬¸ì— geneì—ëŠ” ë’¤ì§‘íŒ ê°’ì´ ì €ì¥ë˜ì–´ ìˆë‹¤. ë”°ë¼ì„œ `[::1]`ì„ ì‚¬ìš©í•´ ì›ë˜ ê°’ìœ¼ë¡œ ë³€í™˜í•œ ë’¤ ë°˜í™˜í•´ì•¼ í•œë‹¤.

![](https://github.com/B31l/B31l.github.io/blob/master/img/Classic_Computer_Science_Problems/compress-02.png?raw=true)

- **In [2]**

  ```python
  decompressed = decompress(compressed)
  print(f"{ decompressed }: { getsizeof(decompressed) }")
  ```

- **Out [2]**

  ```
  ATGC: 53
  ```

ì›ë³¸ ë°ì´í„° `original`ì™€, ì••ì¶• í›„ í•´ì œ ê³¼ì •ì„ ê±°ì¹œ ë°ì´í„° `decompressed`ê°€ ê°™ìŒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

## 3. ì‹œê°„ ë³µì¡ë„ ë¶„ì„

`n`: ë¶€í˜¸í™” ë° ë³µí˜¸í™” ê³¼ì •ì—ì„œì˜ ì…ë ¥ê°’ì˜ ê¸¸ì´

| ë©”ì„œë“œ     | ì‹œê°„ë³µì¡ë„ |
| ---------- | ---------- |
| compress   | O(n)       |
| decompress | O(n)       |

## 4. Dictionary vs If statement

ì¡°ê±´ë¬¸ ëŒ€ì‹  íŒŒì´ì¬ì˜ **ì‚¬ì „ ìë£Œí˜•**ë¥¼ ì‚¬ìš©í•´ êµ¬í˜„í•  ìˆ˜ë„ ìˆë‹¤. ì´ ë•Œ DictionaryëŠ” ë‰´í´ë ˆì˜¤íƒ€ì´ë“œì™€ ê·¸ì— í•´ë‹¹í•˜ëŠ” ë¹„íŠ¸ë¥¼  ê°ê° Keyì™€ Valueë¡œ ê°–ëŠ”ë‹¤. 

ì¡°ê±´ë¬¸ì„ ì‚¬ìš©í•˜ë©´ ê° ë°˜ë³µ ë‹¹ ìµœëŒ€ 4ë²ˆ ë¹„êµí•´ì•¼ í•˜ë©°, ì‚¬ì „ ìë£Œí˜•ì„ ì‚¬ìš©í•˜ë©´ í•´ì‹œ ì¶©ëŒì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤. 

í•˜ì§€ë§Œ ê²°ê³¼ì ìœ¼ë¡œëŠ” ë‘ ë°©ë²• ëª¨ë‘ `O(n)`ì˜ ì‹œê°„ ë³µì¡ë„ë¥¼ ê°€ì§„ë‹¤.

---

# **í—ˆí”„ë§Œ ë¶€í˜¸í™”**

ìœ ì „ ë°ì´í„°ëŠ” 4ê°€ì§€ ì¢…ë¥˜ì˜ ë¬¸ìë¡œë§Œ êµ¬ì„±ë˜ì–´ ìˆì–´ ì••ì¶• ê³¼ì •ì´ ì–´ë µì§€ ì•Šë‹¤. í•˜ì§€ë§Œ ë¬¸ìì˜ ì¢…ë¥˜ê°€ ë§ì•„ì§ˆìˆ˜ë¡ ì´ ë°©ë²•ì€ í•œê³„ì— ë¶€ë”ªíŒë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ASCII ë¬¸ì„œëŠ” ìµœëŒ€ 128ê°€ì§€ì˜ ë¬¸ìë¡œ êµ¬ì„±ë˜ë©°, ìœ ë‹ˆì½”ë“œì˜ ê²½ìš° í•œê¸€ ìˆ˜ë§Œ í•´ë„ 11,172ê°œì´ë‹¤. ê° ë¬¸ìì— í•´ë‹¹í•˜ëŠ” ë¹„íŠ¸ ë¬¸ìì—´ì„ ì¼ì¼ì´ ì§€ì •í•˜ëŠ” ê²ƒì€ ë¹„íš¨ìœ¨ì ì´ê³ , ë†’ì€ ì••ì¶•ë¥ ì„ ê¸°ëŒ€í•  ìˆ˜ë„ ì—†ë‹¤. 

**í—ˆí”„ë§Œ ë¶€í˜¸í™”(Huffman coding)**ëŠ” ê° ë¬¸ìì˜ ë“±ì¥ ë¹ˆë„ë¥¼ í†µí•´ íŠ¸ë¦¬ë¥¼ ë§Œë“  ë’¤, ê° ë¬¸ìì— í•´ë‹¹í•˜ëŠ” ë…¸ë“œì˜ ìœ„ì¹˜ì— ë”°ë¼ ì„œë¡œ ë‹¤ë¥¸ ë¹„íŠ¸ ë¬¸ìì—´ì„ ë¶€ì—¬í•œë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, ë¬¸ìì—´ **GOOGOLPLEX**ì˜ ì••ì¶•ì€ ë‹¤ìŒê³¼ ê°™ì€ ê³¼ì •ì„ ê±°ì¹œë‹¤.

![](https://github.com/B31l/B31l.github.io/blob/master/img/Classic_Computer_Science_Problems/compress-03.png?raw=true)

1. ë¸”ë¼

     ![](https://github.com/B31l/B31l.github.io/blob/master/img/Classic_Computer_Science_Problems/compress-04.png?raw=true)

1. ë¸”ë¼

   ![](https://github.com/B31l/B31l.github.io/blob/master/img/Classic_Computer_Science_Problems/compress-05.png?raw=true)

1. ë¸”ë¼

   ![](https://github.com/B31l/B31l.github.io/blob/master/img/Classic_Computer_Science_Problems/compress-06.png?raw=true)

1. ë¸”ë¼

   ![](https://github.com/B31l/B31l.github.io/blob/master/img/Classic_Computer_Science_Problems/compress-07.png?raw=true)

1. ë¸”ë¼

   ![](https://github.com/B31l/B31l.github.io/blob/master/img/Classic_Computer_Science_Problems/compress-08.png?raw=true)

1. ë¸”ë¼

   ![](https://github.com/B31l/B31l.github.io/blob/master/img/Classic_Computer_Science_Problems/compress-09.png?raw=true)

## 1. compress

```python

```



## 2. decompress

```python
```



---

# Reference

- <https://clansim.tistory.com/73>

