---
title: "Week-4: ê·¸ë˜í”„ ë¬¸ì œ"
categories: [DSA]
mathjax: true
---

* content
{:toc}
# ê·¸ë˜í”„ ì´ë¡ 

![](https://raw.githubusercontent.com/CodingRG-HKNU/FoundationsOfAlgorithms/master/slides/images/algo03/algo03-03.png)

âœ’ **ì´ë¯¸ì§€ ì¶œì²˜**: <https://codingalzi.github.io/algopy/notebooks/algopy06_Dynamic_Programming_2.html>

ê·¸ë˜í”„ëŠ” **ì •ì **(vertex)ê³¼ ì •ì ë“¤ì„ ì—°ê²°í•˜ëŠ” **ì´ìŒì„ **(edge)ìœ¼ë¡œ êµ¬ì„±ëœë‹¤. 

ê°ê°ì˜ ì´ìŒì„ ì´ **ê°€ì¤‘ì¹˜**(weight)ë¥¼ ê°–ëŠ” ê·¸ë˜í”„ë¥¼ **ê°€ì¤‘ ê·¸ë˜í”„**(weighted graph), ê·¸ë ‡ì§€ ì•Šì€ ê·¸ë˜í”„ë¥¼ **ë¹„ê°€ì¤‘ ê·¸ë˜í”„**(unweighted graph)ë¼ê³  í•œë‹¤.

ê°ê°ì˜ ì´ìŒì„ ì´ **ë°©í–¥**(direction)ì„ ê°–ëŠ” ê·¸ë˜í”„ë¥¼ **ìœ í–¥ ê·¸ë˜í”„**(directed graph; digraph), ê·¸ë ‡ì§€ ì•Šì€ ê·¸ë˜í”„ë¥¼ **ë¬´í–¥ ê·¸ë˜í”„**(undirected graph)ë¼ê³   í•œë‹¤.

ê·¸ë˜í”„ì˜ **ê²½ë¡œ**(path)ëŠ” í•œ ì •ì ì—ì„œ ë‹¤ë¥¸ ì •ì ìœ¼ë¡œ ê°€ëŠ” ì´ìŒì„ ë“¤ì˜ ëª¨ìŒì´ë©°, ê²½ë¡œì˜ **ê¸¸ì´**(length)ê°€ ìµœì†Œê°€ ë˜ëŠ” ê²½ë¡œë¥¼ ìµœë‹¨ ê²½ë¡œë¼ê³  í•œë‹¤. 

| ê·¸ë˜í”„ ì¢…ë¥˜   | ê²½ë¡œì˜ ê¸¸ì´                |
| ------------- | -------------------------- |
| ê°€ì¤‘ ê·¸ë˜í”„   | ê²½ë¡œ ìƒì— ìˆëŠ” ê°€ì¤‘ì¹˜ì˜ í•© |
| ë¹„ê°€ì¤‘ ê·¸ë˜í”„ | ê²½ë¡œ ìƒì— ìˆëŠ” ì´ìŒì„ ì˜ ìˆ˜ |

---

# ë¹„ê°€ì¤‘ ê·¸ë˜í”„

## ì •ì˜

Edgeì™€ Graph í´ë˜ìŠ¤ë¥¼ ì •ì˜í•˜ê³ , **TypeVar**ì„ ì‚¬ìš©í•´ ì •ì ‘ íƒ€ì…ì„ ì„ ì–¸í•œë‹¤.

| ì†ì„±   | íƒ€ì…  |
| ------ | ----- |
| ê·¸ë˜í”„ | Graph |
| ì •ì    | V     |
| ì´ìŒì„  | Edge  |

<u>edge.py</u>

```python
from __future__ import annotations
from dataclasses import dataclass


@dataclass  # __init__ ìë™ ìƒì„±
class Edge:
    u:int   # ì •ì (from)
    v:int   # ì •ì (to)

    def reversed(self) -> Edge:
        return Edge(self.v, self.u)

    def __repr__(self) -> str:
        return f"{self.u} -> {self.v}"
```
![](https://github.com/B31l/B31l.github.io/blob/master/img/Classic/Edge.png?raw=true)

**Edge** í´ë˜ìŠ¤ëŠ” ë‘ ê°œì˜ ì •ì ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆë‹¤.

> *Note*
>
> **dataclass** ëª¨ë“ˆì˜ **@dataclass** ë°ì½”ë ˆì´í„°ë¥¼ ì‚¬ìš©í•˜ë©´ì€ íŠ¹ìˆ˜ ë©”ì„œë“œë¥¼ ì‚¬ìš©ì ì •ì˜ í´ë˜ìŠ¤ì— ìë™ìœ¼ë¡œ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤. ë°ì½”ë ˆì´í„°ì˜ ë§¤ê°œë³€ìˆ˜ì˜ ê¸°ë³¸ê°’ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.
>
> ```python
>@dataclass(init=True, repr=True, eq=True, order=False)
> ```
> 
> - **init** = True
>
>   **\__init__()** íŠ¹ìˆ˜ ë©”ì„œë“œë¥¼ ìƒì„±í•œë‹¤. ì´ë¯¸ ì •ì˜í–ˆë‹¤ë©´ ì´ ë§¤ê°œë³€ìˆ˜ëŠ” ë¬´ì‹œëœë‹¤.
>
> - **repr** = True
>
>   **\__repr__()** íŠ¹ìˆ˜ ë©”ì„œë“œë¥¼ ìƒì„±í•œë‹¤. ì´ë¯¸ ì •ì˜í–ˆë‹¤ë©´ ì´ ë§¤ê°œë³€ìˆ˜ëŠ” ë¬´ì‹œëœë‹¤.
>
> - **eq** = True
>
>   **\__eq__()** íŠ¹ìˆ˜ ë©”ì„œë“œë¥¼ ìƒì„±í•œë‹¤. ì´ë¯¸ ì •ì˜í–ˆë‹¤ë©´ ì´ ë§¤ê°œë³€ìˆ˜ëŠ” ë¬´ì‹œëœë‹¤.
>
> - **order** = True
>
>   **\__lt__()** **\__le__()** **\__gt__()** **\__ge__()**íŠ¹ìˆ˜ ë©”ì„œë“œë¥¼ ìƒì„±í•œë‹¤. ì´ë¯¸ ì •ì˜í–ˆë‹¤ë©´ **TypeError**ê°€ ë°œìƒí•˜ë©°, orderê°€ ì°¸ì´ê³  eqê°€ ê±°ì§“ì´ë©´ **ValueError**ê°€ ë°œìƒí•œë‹¤.
>
> âœ’ **Ref**: <https://docs.python.org/ko/3/library/dataclasses.html>

<u>graph.py (ê³„ì†)</u>

```python
from typing import TypeVar, Generic, List, Optional
from edge import Edge

V = TypeVar("V")    # ê·¸ë˜í”„ ì •ì (vertice) íƒ€ì…


class Graph(Generic[V]):
    def __init__(self, vertices:List[V] = []) -> None:
        self._vertices:List[V] = vertices
        self._edges:List[List[Edge]] = [[] for _ in vertices]

    @property
    def vertex_count(self) -> int:
        return len(self._vertices)          # ë°˜í™˜: ì •ì ì˜ ìˆ˜

    @property
    def edge_count(self) -> int:
        return sum(map(len, self._edges))   # ë°˜í™˜: Edgeì˜ ìˆ˜
        # map í•¨ìˆ˜ë¥¼ í†µí•´ _edges ë¦¬ìŠ¤íŠ¸ì˜ ê° í•­ëª©ì˜ ê¸¸ì´ë¥¼ êµ¬í•œ ë’¤, sum í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ ëª¨ë‘ í•©ì¹œë‹¤. 

    def add_vertex(self, vertex:V) -> int:
        self._vertices.append(vertex)
        self._edges.append([])
        return self.vertex_count - 1        # ë°˜í™˜: ì •ì ì˜ ì¸ë±ìŠ¤

    # Edge ì¶”ê°€
    def add_edge(self, edge:Edge) -> None:
        self._edges[edge.u].append(edge)
        self._edges[edge.v].append(edge.reversed())
        # ì •ì  a: a -> b
        # ì •ì  b: b -> a

    # ì •ì  ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ Edge ì¶”ê°€
    def add_edge_by_indices(self, u:int, v:int) -> None:
        edge:Edge = Edge(u, v)
        self.add_edge(edge)

    # ì •ì  ì¸ë±ìŠ¤ë¥¼ ì°¸ì¡°í•˜ì—¬ Edge ì¶”ê°€
    def add_edge_by_vertices(self, first:V, second:V) -> None:
        u:int = self._vertices.index(first)
        v:int = self._vertices.index(second)
        self.add_edge_by_indices(u, v)
        # index í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´ ìœ„ì¹˜ë¥¼ ì°¾ì„ ìˆ˜ ìˆë‹¤.

    # ì¸ë±ìŠ¤ -> ì •ì 
    def vertex_at(self, index:int) -> V:
        return self._vertices[index]

    # ì •ì  -> ì¸ë±ìŠ¤
    def index_of(self, vertex:V) -> int:
        return self._vertices.index(vertex)

    # ì •ì  ì¸ë±ìŠ¤ì— ì—°ê²°ëœ ì •ì 
    def neighbors_for_index(self, index:int) -> List[V]:
        return list(map(self.vertex_at, [e.v for e in self._edges[index]]))
        # ì—£ì§€ì˜ ëª¨ë“  ë ì (v)ì˜ ê° ì¸ë±ìŠ¤ì— í•´ë‹¹í•˜ëŠ” ì •ì ì˜ ë¦¬ìŠ¤íŠ¸

    # ì •ì ì— ì—°ê²°ëœ ì´ì›ƒ ì •ì 
    def neighbors_for_vertex(self, vertex:V) -> List[V]:
        return self.neighbors_for_index(self.index_of(vertex))

    # ì •ì  ì¸ë±ìŠ¤ì— ì—°ê²°ëœ Edge
    def edges_for_index(self, index:int) -> List[Edge]:
        return self._edges[index]

    # ì •ì ì— ì—°ê²°ëœ Edge
    def edges_for_vertex(self, vertex:V) -> List[Edge]:
        return self.edges_for_index(self.index_of(vertex))

    # ê·¸ë˜í”„ ì¶œë ¥
    def __repr__(self) -> str:
        desc:str = ""
        for i in range(self.vertex_count):
            desc += f"{self.vertex_at(i)} -> {self.neighbors_for_index(i)}\n"
        return desc
```

![](https://github.com/B31l/B31l.github.io/blob/master/img/Classic/Graph.png?raw=true)

**Graph** í´ë˜ìŠ¤ëŠ” ì—¬ëŸ¬ ì •ì (vertices)ê³¼ ì—¬ëŸ¬ ì´ìŒì„ (edges)ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆë‹¤. ê·¸ë˜í”„ì˜ ëª¨ë“  ì •ì ì„ í•­ëª©ìœ¼ë¡œ ê°–ëŠ” ë¦¬ìŠ¤íŠ¸(**self.\_vertices**:List[V])ì™€, ëª¨ë“  ì´ìŒì„ ì„ í•­ëª©ìœ¼ë¡œ ê°–ëŠ” ë¦¬ìŠ¤íŠ¸(**self.\_edges**:List[List[Edge]])ë¥¼ ì‘ì„±í•œë‹¤. ë‘ ë¦¬ìŠ¤íŠ¸ëŠ” ë™ì¼í•œ ì¸ë±ìŠ¤ ê·œì¹™ì„ ê°–ëŠ”ë‹¤. self.\_index ë¦¬ìŠ¤íŠ¸ì˜ xë²ˆì§¸ í•­ëª©ì€ xë²ˆì§¸ ì •ì ì—ì„œ ì¶œë°œí•˜ëŠ” edgeë¡œ êµ¬ì„±ë˜ì–´ ìˆë‹¤.

ì •ì  ì •ë³´ ì…ë ¥ì€ Graph ê°ì²´ë¥¼ ìƒì„±í•  ë•Œ ì´ë£¨ì–´ì§€ëŠ” ë°˜ë©´, ì´ìŒì„  ì •ë³´ ì…ë ¥ì€ **add_edge** ë©”ì„œë“œë¥¼ í†µí•´ ì´ë£¨ì–´ì§„ë‹¤. add_edge ë©”ì„œë“œì˜ ë§¤ê°œë³€ìˆ˜ë¡œ Edge ê°ì²´ë¥¼ ì¼ì¼ì´ ì…ë ¥í•˜ëŠ” ê³¼ì •ì€ ë²ˆê±°ë¡œìš°ë¯€ë¡œ, í—¬í¼ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ ì •ì  ì¸ë±ìŠ¤ ë˜ëŠ” ì •ì  ì´ë¦„ì„ í†µí•´ ì…ë ¥ë°›ëŠ”ë‹¤.

## ì¶œë ¥

ì •ì ìœ¼ë¡œ str íƒ€ì…ì„ ì‚¬ìš©í•œë‹¤.

<u>graph.py (ê³„ì†)</u>

```python
if __name__ == "__main__":
    city_graph:Graph[str] = Graph(
        ["ì‹œì• í‹€"       , "ìƒŒí”„ë€ì‹œìŠ¤ì½”", "ë¡œìŠ¤ì•¤ì ¤ë ˆìŠ¤",
         "ë¦¬ë²„ì‚¬ì´ë“œ"   , "í”¼ë‹‰ìŠ¤"      , "ì‹œì¹´ê³ ",
         "ë³´ìŠ¤í„´"       , "ë‰´ìš•"        , "ì• í‹€ëœíƒ€",
         "ë§ˆì´ì• ë¯¸"     , "ëŒˆëŸ¬ìŠ¤"      , "íœ´ìŠ¤í„´",
         "ë””íŠ¸ë¡œì´íŠ¸"   , "í•„ë¼ë¸í”¼ì•„"  , "ì›Œì‹±í„´"])
                                   
    city_graph.add_edge_by_vertices("ì‹œì• í‹€"      , "ì‹œì¹´ê³ ")
    city_graph.add_edge_by_vertices("ì‹œì• í‹€"      , "ìƒŒí”„ë€ì‹œìŠ¤ì½”")
    city_graph.add_edge_by_vertices("ìƒŒí”„ë€ì‹œìŠ¤ì½”", "ë¦¬ë²„ì‚¬ì´ë“œ")
    city_graph.add_edge_by_vertices("ìƒŒí”„ë€ì‹œìŠ¤ì½”", "ë¡œìŠ¤ì•¤ì ¤ë ˆìŠ¤")
    city_graph.add_edge_by_vertices("ë¡œìŠ¤ì•¤ì ¤ë ˆìŠ¤", "ë¦¬ë²„ì‚¬ì´ë“œ")
    city_graph.add_edge_by_vertices("ë¡œìŠ¤ì•¤ì ¤ë ˆìŠ¤", "í”¼ë‹‰ìŠ¤")
    city_graph.add_edge_by_vertices("ë¦¬ë²„ì‚¬ì´ë“œ"  , "í”¼ë‹‰ìŠ¤")
    city_graph.add_edge_by_vertices("ë¦¬ë²„ì‚¬ì´ë“œ"  , "ì‹œì¹´ê³ ")
    city_graph.add_edge_by_vertices("í”¼ë‹‰ìŠ¤"      , "ëŒˆëŸ¬ìŠ¤")
    city_graph.add_edge_by_vertices("í”¼ë‹‰ìŠ¤"      , "íœ´ìŠ¤í„´")
    city_graph.add_edge_by_vertices("ëŒˆëŸ¬ìŠ¤"      , "ì‹œì¹´ê³ ")
    city_graph.add_edge_by_vertices("ëŒˆëŸ¬ìŠ¤"      , "ì• í‹€ëœíƒ€")
    city_graph.add_edge_by_vertices("ëŒˆëŸ¬ìŠ¤"      , "íœ´ìŠ¤í„´")
    city_graph.add_edge_by_vertices("íœ´ìŠ¤í„´"      , "ì• í‹€ëœíƒ€")
    city_graph.add_edge_by_vertices("íœ´ìŠ¤í„´"      , "ë§ˆì´ì• ë¯¸")
    city_graph.add_edge_by_vertices("ì• í‹€ëœíƒ€"    , "ì‹œì¹´ê³ ")
    city_graph.add_edge_by_vertices("ì• í‹€ëœíƒ€"    , "ì›Œì‹±í„´")
    city_graph.add_edge_by_vertices("ì• í‹€ëœíƒ€"    , "ë§ˆì´ì• ë¯¸")
    city_graph.add_edge_by_vertices("ë§ˆì´ì• ë¯¸"    , "ì›Œì‹±í„´")
    city_graph.add_edge_by_vertices("ì‹œì¹´ê³ "      , "ë””íŠ¸ë¡œì´íŠ¸")
    city_graph.add_edge_by_vertices("ë””íŠ¸ë¡œì´íŠ¸"  , "ë³´ìŠ¤í„´")
    city_graph.add_edge_by_vertices("ë””íŠ¸ë¡œì´íŠ¸"  , "ì›Œì‹±í„´")
    city_graph.add_edge_by_vertices("ë””íŠ¸ë¡œì´íŠ¸"  , "ë‰´ìš•")
    city_graph.add_edge_by_vertices("ë³´ìŠ¤í„´"      , "ë‰´ìš•")
    city_graph.add_edge_by_vertices("ë‰´ìš•"        , "í•„ë¼ë¸í”¼ì•„")
    city_graph.add_edge_by_vertices("í•„ë¼ë¸í”¼ì•„"  , "ì›Œì‹±í„´")
    
    print(city_graph) 
```

<s>Console</s>

```
ì‹œì• í‹€ -> ['ì‹œì¹´ê³ ', 'ìƒŒí”„ë€ì‹œìŠ¤ì½”']
ìƒŒí”„ë€ì‹œìŠ¤ì½” -> ['ì‹œì• í‹€', 'ë¦¬ë²„ì‚¬ì´ë“œ', 'ë¡œìŠ¤ì•¤ì ¤ë ˆìŠ¤']
ë¡œìŠ¤ì•¤ì ¤ë ˆìŠ¤ -> ['ìƒŒí”„ë€ì‹œìŠ¤ì½”', 'ë¦¬ë²„ì‚¬ì´ë“œ', 'í”¼ë‹‰ìŠ¤']
ë¦¬ë²„ì‚¬ì´ë“œ -> ['ìƒŒí”„ë€ì‹œìŠ¤ì½”', 'ë¡œìŠ¤ì•¤ì ¤ë ˆìŠ¤', 'í”¼ë‹‰ìŠ¤', 'ì‹œì¹´ê³ ']    
í”¼ë‹‰ìŠ¤ -> ['ë¡œìŠ¤ì•¤ì ¤ë ˆìŠ¤', 'ë¦¬ë²„ì‚¬ì´ë“œ', 'ëŒˆëŸ¬ìŠ¤', 'íœ´ìŠ¤í„´']
ì‹œì¹´ê³  -> ['ì‹œì• í‹€', 'ë¦¬ë²„ì‚¬ì´ë“œ', 'ëŒˆëŸ¬ìŠ¤', 'ì• í‹€ëœíƒ€', 'ë””íŠ¸ë¡œì´íŠ¸']
ë³´ìŠ¤í„´ -> ['ë””íŠ¸ë¡œì´íŠ¸', 'ë‰´ìš•']
ë‰´ìš• -> ['ë””íŠ¸ë¡œì´íŠ¸', 'ë³´ìŠ¤í„´', 'í•„ë¼ë¸í”¼ì•„']
ì• í‹€ëœíƒ€ -> ['ëŒˆëŸ¬ìŠ¤', 'íœ´ìŠ¤í„´', 'ì‹œì¹´ê³ ', 'ì›Œì‹±í„´', 'ë§ˆì´ì• ë¯¸']
ë§ˆì´ì• ë¯¸ -> ['íœ´ìŠ¤í„´', 'ì• í‹€ëœíƒ€', 'ì›Œì‹±í„´']
ëŒˆëŸ¬ìŠ¤ -> ['í”¼ë‹‰ìŠ¤', 'ì‹œì¹´ê³ ', 'ì• í‹€ëœíƒ€', 'íœ´ìŠ¤í„´']
íœ´ìŠ¤í„´ -> ['í”¼ë‹‰ìŠ¤', 'ëŒˆëŸ¬ìŠ¤', 'ì• í‹€ëœíƒ€', 'ë§ˆì´ì• ë¯¸']
ë””íŠ¸ë¡œì´íŠ¸ -> ['ì‹œì¹´ê³ ', 'ë³´ìŠ¤í„´', 'ì›Œì‹±í„´', 'ë‰´ìš•']
í•„ë¼ë¸í”¼ì•„ -> ['ë‰´ìš•', 'ì›Œì‹±í„´']
ì›Œì‹±í„´ -> ['ì• í‹€ëœíƒ€', 'ë§ˆì´ì• ë¯¸', 'ë””íŠ¸ë¡œì´íŠ¸', 'í•„ë¼ë¸í”¼ì•„']
```

## ìµœë‹¨ ê²½ë¡œ

Graph í´ë˜ìŠ¤ëŠ” ë¹„ê°€ì¤‘ ê·¸ë˜í”„ì´ë¯€ë¡œ ì´ìŒì„ ì˜ ìˆ˜ê°€ ìµœì†Œê°€ ë˜ëŠ” ê²½ë¡œë¥¼ ì°¾ëŠ”ë‹¤. ì´ëŠ” 2ì¥ì—ì„œ í•™ìŠµí–ˆë˜ [ë„ˆë¹„ ìš°ì„  íƒìƒ‰](https://b31l.github.io/2022/01/12/Week-2/#-%EB%84%88%EB%B9%84-%EC%9A%B0%EC%84%A0-%ED%83%90%EC%83%89bfs)ì„ ì¬ì‚¬ìš©í•´ êµ¬í•  ìˆ˜ ìˆë‹¤.

**goal_test**ëŠ” lambdaë¥¼, **successors**ëŠ” Graph í´ë˜ìŠ¤ì˜ **neighbors_for_vertex** ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ êµ¬í˜„í•œë‹¤.

| ë§¤ê°œë³€ìˆ˜                            | ì¸ì                            | ì„¤ëª…      |
| ----------------------------------- | ------------------------------- | --------- |
| `initial`:T                         | root                            | ì‹œì‘ ì§€ì  |
| `goal_test`:Callable[[T], bool]     | lambda x: x == goal             | ëª©í‘œ ì§€ì  |
| `successors`:Callable[[T], List[T]] | city_graph.neighbors_for_vertex | ë‹¤ìŒ ì§€ì  |

**bfs** í•¨ìˆ˜ì— ì ì ˆí•œ ë§¤ê°œë³€ìˆ˜ë¥¼ ì…ë ¥í•œ ë’¤, **node_to_path** í•¨ìˆ˜ë¥¼ í†µí•´ ë°˜í™˜ê°’ì„ ë¦¬ìŠ¤íŠ¸ë¡œ ë³€í™˜í•˜ê³  ì¶œë ¥í•œë‹¤.

<u>graph.py</u>

```python
if __name__ == "__main__":
	from generic_search import bfs, Node, node_to_path
    
    root = "ë³´ìŠ¤í„´"
    goal = "ë§ˆì´ì• ë¯¸"

    bfs_result:Optional[Node[V]] = bfs(root, 
                                       lambda x: x == goal, 
                                       city_graph.neighbors_for_vertex)
    if bfs_result is None:
        print("ë„ˆë¹„ ìš°ì„  íƒìƒ‰ìœ¼ë¡œ ë‹µì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!")
    else:
        path:List[V] = node_to_path(bfs_result)
        print(f"{root}ì—ì„œ {goal}ê¹Œì§€ ìµœë‹¨ ê²½ë¡œ: ")
        print(path)
```

<s>Console</s>

```
ë³´ìŠ¤í„´ì—ì„œ ë§ˆì´ì• ë¯¸ê¹Œì§€ ìµœë‹¨ ê²½ë¡œ:
['ë³´ìŠ¤í„´', 'ë””íŠ¸ë¡œì´íŠ¸', 'ì›Œì‹±í„´', 'ë§ˆì´ì• ë¯¸']
```

> *Note*
>
> ìƒìœ„ ë””ë ‰í„°ë¦¬ì˜ íŒ¨í‚¤ì§€ì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ì„œëŠ” **sys** ëª¨ë“ˆì„ ì‚¬ìš©í•´ ë‹¤ìŒê³¼ ê°™ì´ importí•œë‹¤.
>
> ```python
> import sys
> sys.path.insert(0, '.')
> from ch2.generic_search import bfs, Node, node_to_path
> ```

---

# ê°€ì¤‘ ê·¸ë˜í”„

## ì¬ì •ì˜

ê¸°ì¡´ì˜ Edgeì™€ Graph í´ë˜ìŠ¤ë¥¼ ì¬ì •ì˜í•˜ê³ , ê°€ì¤‘ì¹˜ ì†ì„±ì„ ì¶”ê°€í•œë‹¤.

| ì†ì„±   | íƒ€ì…          |
| ------ | ------------- |
| ê·¸ë˜í”„ | WeightedGraph |
| ì •ì    | V             |
| ì´ìŒì„  | WeightedEdge  |
| ê°€ì¤‘ì¹˜ | float         |

<u>weighted_edge.py</u>

```python
from __future__ import annotations
from dataclasses import dataclass
from edge import Edge


@dataclass
class WeightedEdge(Edge):
    weight:float

    def reversed(self) -> WeightedEdge:
        return WeightedEdge(self.v, self.u, self.weight)

    def __lt__(self, other:WeightedEdge) -> bool:
        return self.weight < other.weight

    def __repr__(self) -> str:
        return f"{self.u} {self.weight} -> {self.v}"
```

ê°€ì¤‘ì¹˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ì¶”ê°€ë¡œ ê°€ì§€ë¯€ë¡œ ê¸°ì¡´ ë©”ì„œë“œë“¤ì„ ì¬ì •ì˜í•´ ì¸ì ì¡°ê±´ì„ ë§Œì¡±ì‹œí‚¨ë‹¤. ë˜í•œ **\__lt__()** íŠ¹ìˆ˜ ë©”ì„œë“œë¥¼ êµ¬í˜„í•´ ë‘ ì´ìŒì„ ì˜ ê°€ì¤‘ì¹˜ë¥¼ ë¹„êµí•˜ëŠ” ê¸°ëŠ¥ì„ ì¶”ê°€í•œë‹¤.

```python
from typing import TypeVar, Generic, List, Tuple
from graph import Graph
from weighted_edge import WeightedEdge

V = TypeVar("V")    # ê·¸ë˜í”„ ì •ì (vertice) íƒ€ì…


class WeightedGraph(Generic[V], Graph[V]):
    def __init__(self, vertices:List[V] = []) -> None:
        self._vertices:List[V] = vertices
        self._edges:List[List[WeightedEdge]] = [[] for _ in vertices]

    def add_edge_by_indices(self, u:int, v:int, weight:float) -> None:
        edge:WeightedEdge = WeightedEdge(u, v, weight)
        self.add_edge(edge)

    def add_edge_by_vertices(self, first:V, second:V, weight:float) -> None:
        u:int = self._vertices.index(first)
        v:int = self._vertices.index(second)
        self.add_edge_by_indices(u, v, weight)

    def neighbors_for_index_with_weights(self, index:int) -> List[Tuple[V, float]]:
        distance_tuples:List[Tuple[V, float]] = []
        for edge in self.edges_for_index(index):
            distance_tuples.append((self.vertex_at(edge.v), edge.weight))
        return distance_tuples

    def __repr__(self) -> str:
        desc:str = ""
        for i in range(self.vertex_count):
            desc += f"{self.vertex_at(i)} -> {self.neighbors_for_index_with_weights(i)}\n"
        return desc
```

Edge ëŒ€ì‹  WeightedEdgeë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ ê¸°ì¡´ ë©”ì„œë“œë“¤ì„ ì¬ì •ì˜í•´ ì¸ì ì¡°ê±´ì„ ë§Œì¡±ì‹œí‚¨ë‹¤.

## ì¶œë ¥

ê°€ì¤‘ì¹˜ ì¸ìë¥¼ ì¶”ê°€ë¡œ ì…ë ¥í•œë‹¤.

<u>weighted_graph.py (ê³„ì†)</u>

```python
if __name__ == "__main__":
    city_graph2:WeightedGraph[str] = WeightedGraph(
        ["ì‹œì• í‹€"       , "ìƒŒí”„ë€ì‹œìŠ¤ì½”", "ë¡œìŠ¤ì•¤ì ¤ë ˆìŠ¤",
         "ë¦¬ë²„ì‚¬ì´ë“œ"   , "í”¼ë‹‰ìŠ¤"      , "ì‹œì¹´ê³ ",
         "ë³´ìŠ¤í„´"       , "ë‰´ìš•"        , "ì• í‹€ëœíƒ€",
         "ë§ˆì´ì• ë¯¸"     , "ëŒˆëŸ¬ìŠ¤"      , "íœ´ìŠ¤í„´",
         "ë””íŠ¸ë¡œì´íŠ¸"   , "í•„ë¼ë¸í”¼ì•„"  , "ì›Œì‹±í„´"])
                                   
    city_graph2.add_edge_by_vertices("ì‹œì• í‹€"      , "ì‹œì¹´ê³ "      , 1737)
    city_graph2.add_edge_by_vertices("ì‹œì• í‹€"      , "ìƒŒí”„ë€ì‹œìŠ¤ì½”", 678)
    city_graph2.add_edge_by_vertices("ìƒŒí”„ë€ì‹œìŠ¤ì½”", "ë¦¬ë²„ì‚¬ì´ë“œ"  , 386)
    city_graph2.add_edge_by_vertices("ìƒŒí”„ë€ì‹œìŠ¤ì½”", "ë¡œìŠ¤ì•¤ì ¤ë ˆìŠ¤", 348)
    city_graph2.add_edge_by_vertices("ë¡œìŠ¤ì•¤ì ¤ë ˆìŠ¤", "ë¦¬ë²„ì‚¬ì´ë“œ"  , 50)
    city_graph2.add_edge_by_vertices("ë¡œìŠ¤ì•¤ì ¤ë ˆìŠ¤", "í”¼ë‹‰ìŠ¤"      , 357)
    city_graph2.add_edge_by_vertices("ë¦¬ë²„ì‚¬ì´ë“œ"  , "í”¼ë‹‰ìŠ¤"      , 307)
    city_graph2.add_edge_by_vertices("ë¦¬ë²„ì‚¬ì´ë“œ"  , "ì‹œì¹´ê³ "      , 1704)
    city_graph2.add_edge_by_vertices("í”¼ë‹‰ìŠ¤"      , "ëŒˆëŸ¬ìŠ¤"      , 887)
    city_graph2.add_edge_by_vertices("í”¼ë‹‰ìŠ¤"      , "íœ´ìŠ¤í„´"      , 1015)
    city_graph2.add_edge_by_vertices("ëŒˆëŸ¬ìŠ¤"      , "ì‹œì¹´ê³ "      , 805)
    city_graph2.add_edge_by_vertices("ëŒˆëŸ¬ìŠ¤"      , "ì• í‹€ëœíƒ€"    , 721)
    city_graph2.add_edge_by_vertices("ëŒˆëŸ¬ìŠ¤"      , "íœ´ìŠ¤í„´"      , 225)
    city_graph2.add_edge_by_vertices("íœ´ìŠ¤í„´"      , "ì• í‹€ëœíƒ€"    , 702)
    city_graph2.add_edge_by_vertices("íœ´ìŠ¤í„´"      , "ë§ˆì´ì• ë¯¸"    , 968)
    city_graph2.add_edge_by_vertices("ì• í‹€ëœíƒ€"    , "ì‹œì¹´ê³ "      , 588)
    city_graph2.add_edge_by_vertices("ì• í‹€ëœíƒ€"    , "ì›Œì‹±í„´"      , 543)
    city_graph2.add_edge_by_vertices("ì• í‹€ëœíƒ€"    , "ë§ˆì´ì• ë¯¸"    , 604)
    city_graph2.add_edge_by_vertices("ë§ˆì´ì• ë¯¸"    , "ì›Œì‹±í„´"      , 923)
    city_graph2.add_edge_by_vertices("ì‹œì¹´ê³ "      , "ë””íŠ¸ë¡œì´íŠ¸"  , 238)
    city_graph2.add_edge_by_vertices("ë””íŠ¸ë¡œì´íŠ¸"  , "ë³´ìŠ¤í„´"      , 613)
    city_graph2.add_edge_by_vertices("ë””íŠ¸ë¡œì´íŠ¸"  , "ì›Œì‹±í„´"      , 396)
    city_graph2.add_edge_by_vertices("ë””íŠ¸ë¡œì´íŠ¸"  , "ë‰´ìš•"        , 482)
    city_graph2.add_edge_by_vertices("ë³´ìŠ¤í„´"      , "ë‰´ìš•"        , 190)
    city_graph2.add_edge_by_vertices("ë‰´ìš•"        , "í•„ë¼ë¸í”¼ì•„"  , 81)
    city_graph2.add_edge_by_vertices("í•„ë¼ë¸í”¼ì•„"  , "ì›Œì‹±í„´"      , 123)
    
    print(city_graph2)
```

<s>Console</s>

```
ì‹œì• í‹€ -> [('ì‹œì¹´ê³ ', 1737), ('ìƒŒí”„ë€ì‹œìŠ¤ì½”', 678)]
ìƒŒí”„ë€ì‹œìŠ¤ì½” -> [('ì‹œì• í‹€', 678), ('ë¦¬ë²„ì‚¬ì´ë“œ', 386), ('ë¡œìŠ¤ì•¤ì ¤ë ˆìŠ¤', 348)]
ë¡œìŠ¤ì•¤ì ¤ë ˆìŠ¤ -> [('ìƒŒí”„ë€ì‹œìŠ¤ì½”', 348), ('ë¦¬ë²„ì‚¬ì´ë“œ', 50), ('í”¼ë‹‰ìŠ¤', 357)]
ë¦¬ë²„ì‚¬ì´ë“œ -> [('ìƒŒí”„ë€ì‹œìŠ¤ì½”', 386), ('ë¡œìŠ¤ì•¤ì ¤ë ˆìŠ¤', 50), ('í”¼ë‹‰ìŠ¤', 307), ('ì‹œì¹´ê³ ', 1704)]
í”¼ë‹‰ìŠ¤ -> [('ë¡œìŠ¤ì•¤ì ¤ë ˆìŠ¤', 357), ('ë¦¬ë²„ì‚¬ì´ë“œ', 307), ('ëŒˆëŸ¬ìŠ¤', 887), ('íœ´ìŠ¤í„´', 1015)]
ì‹œì¹´ê³  -> [('ì‹œì• í‹€', 1737), ('ë¦¬ë²„ì‚¬ì´ë“œ', 1704), ('ëŒˆëŸ¬ìŠ¤', 805), ('ì• í‹€ëœíƒ€', 588), ('ë””íŠ¸ë¡œì´íŠ¸', 238)]
ë³´ìŠ¤í„´ -> [('ë””íŠ¸ë¡œì´íŠ¸', 613), ('ë‰´ìš•', 190)]
ë‰´ìš• -> [('ë””íŠ¸ë¡œì´íŠ¸', 482), ('ë³´ìŠ¤í„´', 190), ('í•„ë¼ë¸í”¼ì•„', 81)]
ì• í‹€ëœíƒ€ -> [('ëŒˆëŸ¬ìŠ¤', 721), ('íœ´ìŠ¤í„´', 702), ('ì‹œì¹´ê³ ', 588), ('ì›Œì‹±í„´', 543), ('ë§ˆì´ì• ë¯¸', 604)]
ë§ˆì´ì• ë¯¸ -> [('íœ´ìŠ¤í„´', 968), ('ì• í‹€ëœíƒ€', 604), ('ì›Œì‹±í„´', 923)]
ëŒˆëŸ¬ìŠ¤ -> [('í”¼ë‹‰ìŠ¤', 887), ('ì‹œì¹´ê³ ', 805), ('ì• í‹€ëœíƒ€', 721), ('íœ´ìŠ¤í„´', 225)]
íœ´ìŠ¤í„´ -> [('í”¼ë‹‰ìŠ¤', 1015), ('ëŒˆëŸ¬ìŠ¤', 225), ('ì• í‹€ëœíƒ€', 702), ('ë§ˆì´ì• ë¯¸', 968)]
ë””íŠ¸ë¡œì´íŠ¸ -> [('ì‹œì¹´ê³ ', 238), ('ë³´ìŠ¤í„´', 613), ('ì›Œì‹±í„´', 396), ('ë‰´ìš•', 482)]
í•„ë¼ë¸í”¼ì•„ -> [('ë‰´ìš•', 81), ('ì›Œì‹±í„´', 123)]
ì›Œì‹±í„´ -> [('ì• í‹€ëœíƒ€', 543), ('ë§ˆì´ì• ë¯¸', 923), ('ë””íŠ¸ë¡œì´íŠ¸', 396), ('í•„ë¼ë¸í”¼ì•„', 123)]
```

## í”„ë¦¼ ì•Œê³ ë¦¬ì¦˜

í”„ë¦¼ ì•Œê³ ë¦¬ì¦˜ì€ ê·¸ë˜í”„ì˜ ëª¨ë“  ì •ì ì„ ìµœì†Œ ì´ìŒì„  ë° ìµœì†Œ ê°€ì¤‘ì¹˜ë¥¼ ì‚¬ìš©í•´ ì—°ê²°í•˜ëŠ” ë°©ë²•ì„ ì œì‹œí•œë‹¤.

- ìµœì†Œ ì´ìŒì„ 

  ìˆœí™˜ ê·¸ë˜í”„ë¥¼ **ë¹„ìˆœí™˜ì **(acyclic)ì¸ **ì‹ ì¥ íŠ¸ë¦¬**(spanning tree)ë¡œ ìˆ˜ì •í•œë‹¤. ì´ìŒì„  ê°€ì§€ì¹˜ê¸°ë¥¼ í†µí•´ **ì‚¬ì´í´**(cycle)ì„ ì œê±°í•  ìˆ˜ ìˆë‹¤.

- ìµœì†Œ ê°€ì¤‘ì¹˜

  **ìµœì†Œ ì‹ ì¥ íŠ¸ë¦¬**(minimum spanning tree)ëŠ” ê°€ì¤‘ì¹˜ ê·¸ë˜í”„ì˜ ëª¨ë“  ì •ì ì„ ìµœì†Œ ë¹„ìš©ìœ¼ë¡œ ì—°ê²°í•œë‹¤.

í”„ë¦¼ ì•Œê³ ë¦¬ì¦˜ì€ ê° ì •ì ì— ëŒ€í•´ ê°€ì¥ ë‚®ì€ ê°€ì¤‘ì¹˜ë¥¼ ê°€ì§„ ì´ìŒì„ ë§Œì„ ì„ íƒí•˜ë¯€ë¡œ **íƒìš•ì **ì´ë‹¤.

|                         ìˆœí™˜ ê·¸ë˜í”„                          |                          ì‹ ì¥ íŠ¸ë¦¬                           |
| :----------------------------------------------------------: | :----------------------------------------------------------: |
| ![](https://github.com/B31l/B31l.github.io/blob/master/img/Classic/Edge2.png?raw=true) | ![](https://github.com/B31l/B31l.github.io/blob/master/img/Classic/Edge3.png?raw=true) |

<u>priority_queue.py</u>

```python
from typing import TypeVar, Generic, List
from heapq import heappush, heappop

T = TypeVar("T")


class PriorityQueue(Generic[T]):
    def __init__(self) -> None:
        self._container:List[T] = []

    @property
    def empty(self) -> bool:
        return not self._container

    def push(self, item:T) -> None:
        heappush(self._container, item)

    def pop(self) -> T:
        return heappop(self._container)

    def __repr__(self) -> str:
        return repr(self._container)
```

<u>mst.py</u>

```python
from typing import TypeVar, List, Optional
from weighted_graph import WeightedGraph
from weighted_edge import WeightedEdge
from priority_queue import PriorityQueue

V = TypeVar("V")    # ê·¸ë˜í”„ ì •ì (vertice) íƒ€ì…
WeightedPath = List[WeightedEdge]


def total_weight(wp:WeightedPath) -> float:
    return sum([e.weight for e in wp])


def mst(wg:WeightedGraph[V], start:int = 0) -> Optional[WeightedPath]:
    """minimum spanning tree"""

    # ì‹œì‘ ì •ì ì´ ìœ íš¨í•˜ì§€ ì•Šì€ ê²½ìš° None
    if start > (wg.vertex_count - 1) or start < 0:
        return None

    result:WeightedPath = []
    pq:PriorityQueue[WeightedEdge] = PriorityQueue()
    visited:List[bool] = [False] * wg.vertex_count  # ë°©ë¬¸í•œ ê³³
    def visit(index:int):
        visited[index] = True
        for edge in wg.edges_for_index(index):
            if not visited[edge.v]:
                pq.push(edge)

    visit(start)
    while not pq.empty:
        edge = pq.pop()
        if visited[edge.v]:
            continue
        result.append(edge)
        visit(edge.v)
    return result


def print_weighted_path(wg:WeightedGraph, wp:WeightedPath) -> None:
    for edge in wp:
        print(f"{wg.vertex_at(edge.u)} {edge.weight}> {wg.vertex_at(edge.v)}")
    print(f"ê°€ì¤‘ì¹˜ ì´í•©: {total_weight(wp)}")
```

- **ì‹œì‘ ì •ì **(start)ì„ ìµœì†Œ ì‹ ì¥ íŠ¸ë¦¬ì— ì¶”ê°€í•œë‹¤.

- í˜„ì¬ ì •ì ì— ì—°ê²°ëœ ìµœì†Œ ê°€ì¤‘ì¹˜ì˜ ì´ìŒì„ ì„ ì°¾ëŠ”ë‹¤. ì´ ê³¼ì •ì—ì„œ ìš°ì„ ìˆœìœ„ íê°€ ì‚¬ìš©ëœë‹¤. ì´ìŒì„ ì— ì—°ê²°ëœ ì •ì ì„ ìµœì†Œ ì‹ ì¥ íŠ¸ë¦¬ì— ì¶”ê°€í•˜ë©°, ì´ë¯¸ ì¶”ê°€ëœ ì •ì ì´ë¼ë©´ ë‹¤ìŒ ìš°ì„ ìˆœìœ„ë¥¼ ê°€ì§„ ì´ìŒì„ ì„ íƒìƒ‰í•œë‹¤. ìš°ì„ ìˆœìœ„ íê°€ ë¹Œ ë•Œê¹Œì§€(ëª¨ë“  ì •ì ì´ ìµœì†Œ ì‹ ì¥ íŠ¸ë¦¬ì— ì¶”ê°€ë  ë•Œê¹Œì§€) ì´ ê³¼ì •ì„ ë°˜ë³µí•œë‹¤.

<u>mst.py (ê³„ì†)</u>

```python
if __name__ == "__main__":
    ...
    result:Optional[WeightedPath] = mst(city_graph2)
    if result is None:
        print("ìµœì†Œ ì‹ ì¥ íŠ¸ë¦¬ë¡œ ë‹µì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!")
    else:
        print_weighted_path(city_graph2, result)
```

<s>Console</s>

```
ì‹œì• í‹€ 678> ìƒŒí”„ë€ì‹œìŠ¤ì½”
ìƒŒí”„ë€ì‹œìŠ¤ì½” 348> ë¡œìŠ¤ì•¤ì ¤ë ˆìŠ¤
ë¡œìŠ¤ì•¤ì ¤ë ˆìŠ¤ 50> ë¦¬ë²„ì‚¬ì´ë“œ   
ë¦¬ë²„ì‚¬ì´ë“œ 307> í”¼ë‹‰ìŠ¤        
í”¼ë‹‰ìŠ¤ 887> ëŒˆëŸ¬ìŠ¤
ëŒˆëŸ¬ìŠ¤ 225> íœ´ìŠ¤í„´
íœ´ìŠ¤í„´ 702> ì• í‹€ëœíƒ€
ì• í‹€ëœíƒ€ 543> ì›Œì‹±í„´
ì›Œì‹±í„´ 123> í•„ë¼ë¸í”¼ì•„
í•„ë¼ë¸í”¼ì•„ 81> ë‰´ìš•
ë‰´ìš• 190> ë³´ìŠ¤í„´
ì›Œì‹±í„´ 396> ë””íŠ¸ë¡œì´íŠ¸
ë””íŠ¸ë¡œì´íŠ¸ 238> ì‹œì¹´ê³ 
ì• í‹€ëœíƒ€ 604> ë§ˆì´ì• ë¯¸
ê°€ì¤‘ì¹˜ ì´í•©: 5372
```

> *Note*
>
> nê°œì˜ ì •ì ì„ ëª¨ë‘ ì—°ê²°í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ì´ìŒì„ ì˜ ê°œìˆ˜ëŠ” n-1ê°œì´ë‹¤. ìœ„ ë¬¸ì œëŠ” 15ê°œì˜ ì •ì ì„ ì‚¬ìš©í•˜ë¯€ë¡œ ê·¸ë˜í”„ì˜ ì‹ ì¥ íŠ¸ë¦¬ëŠ” 14ê°œì˜ ì´ìŒì„ ì„ ê°€ì§„ë‹¤. ëª¨ë“  ì •ì ì„ ì—°ê²°í•˜ëŠ” ê³¼ì •ì€ 14ë²ˆ ì´ë£¨ì–´ì§€ë©°, ë§¤ë²ˆ ìµœì†Œ ê°€ì¤‘ì¹˜ë§Œì„ ì„ íƒí•˜ë¯€ë¡œ ìƒì„±ë˜ëŠ” ì‹ ì¥ íŠ¸ë¦¬ëŠ” í•­ìƒ ë‹¤ë¥¸ ì‹ ì¥ íŠ¸ë¦¬ë³´ë‹¤ ì‘ê±°ë‚˜ ê°™ì€ ê°€ì¤‘ì¹˜ ì´í•©ì„ ê°€ì§„ë‹¤. ë”°ë¼ì„œ í”„ë¦¼ ì•Œê³ ë¦¬ì¦˜ì€ í•­ìƒ ìµœì†Œ ì‹ ì¥ íŠ¸ë¦¬ë¥¼ ìƒì„±í•œë‹¤.

## ë‹¤ìµìŠ¤íŠ¸ë¼ ì•Œê³ ë¦¬ì¦˜

ë¹„ê°€ì¤‘ ê·¸ë˜í”„ì˜ ìµœë‹¨ ê²½ë¡œëŠ” ë„ˆë¹„ ìš°ì„  íƒìƒ‰ì„ í†µí•´ êµ¬í•  ìˆ˜ ìˆì—ˆë‹¤. ê°€ì¤‘ ê·¸ë˜í”„ì˜ ìµœë‹¨ ê²½ë¡œëŠ” ì´ìŒì„ ì˜ ìˆ˜ê°€ ì•„ë‹Œ, ê°€ì¤‘ì¹˜ì˜ í•©ì„ ê¸°ì¤€ìœ¼ë¡œ ê³„ì‚°í•œë‹¤. ë‹¤ìµìŠ¤íŠ¸ë¼ ì•Œê³ ë¦¬ì¦˜ì€ ê·¸ë˜í”„ì˜ ëª¨ë“  ì •ì ì„ ìµœì†Œ ì´ìŒì„  ë° ìµœì†Œ ê°€ì¤‘ì¹˜ë¥¼ ì‚¬ìš©í•´ ì—°ê²°í•˜ëŠ” ë°©ë²•ì„ ì œì‹œí•œë‹¤.

ë‹¤ìµìŠ¤íŠ¸ë¼ ì•Œê³ ë¦¬ì¦˜ì€ ë‹¤ë¥¸ ëª¨ë“  ì •ì ìœ¼ë¡œì˜ ìµœë‹¨ ê²½ë¡œ(ì´ìŒì„ ì˜ ëª¨ìŒ)ì™€, ê·¸ ê¸¸ì´ë¥¼ ë°˜í™˜í•œë‹¤.

<u>dijkstra.py</u>

```python
from __future__ import annotations
from turtle import distance
from typing import TypeVar, List, Optional, Tuple, Dict
from dataclasses import dataclass
from priority_queue import PriorityQueue
from mst import WeightedPath, print_weighted_path
from weighted_graph import WeightedGraph
from weighted_edge import WeightedEdge
from priority_queue import PriorityQueue

V = TypeVar("V")    # ê·¸ë˜í”„ ì •ì (vertice) íƒ€ì…


@dataclass
class DijkstraNode:
    vertex:int
    distance:float

    def __lt__(self, other:DijkstraNode) -> bool:
        return self.distance < other.distance

    def __eq__(self, other:DijkstraNode) -> bool:
        return self.distance == other.distance


def dijkstra(wg:WeightedGraph[V], root:V) -> Tuple[List[Optional[float]], Dict[int, WeightedEdge]]:
    first:int = wg.index_of(root)
    distances:List[Optional[float]] = [None] * wg.vertex_count
    distances[first] = 0
    path_dict:Dict[int, WeightedEdge] = {}
    pq:PriorityQueue[DijkstraNode] = PriorityQueue()
    pq.push(DijkstraNode(first, 0))

    while not pq.empty:
        u:int = pq.pop().vertex
        dist_u:float = distances[u]
        for we in wg.edges_for_index(u):
            dist_v:float = distances[we.v]
            if dist_v is None or dist_v > we.weight + dist_u:
                distances[we.v] = we.weight + dist_u
                path_dict[we.v] = we
                pq.push(DijkstraNode(we.v, we.weight + dist_u))
    return distances, path_dict


def distance_array_to_vertex_dict(wg:WeightedGraph[V], distances:List[Optional[float]]) -> Dict[V, Optional[float]]:
    distance_dict:Dict[V, Optional[float]] = {}
    for i in range(len(distances)):
        distance_dict[wg.vertex_at(i)] = distances[i]
    return distance_dict


def path_dict_to_path(start:int, end:int, path_dict:Dict[int, WeightedEdge]) -> WeightedPath:
    if len(path_dict) == 0:
        return []
    edge_path:WeightedPath = []
    e:WeightedEdge = path_dict[end]
    edge_path.append(e)
    while e.u != start:
        e = path_dict[e.u]
        edge_path.append(e)
    return list(reversed(edge_path))
```

- **DijkstraNode**ëŠ” í˜„ì¬ê¹Œì§€ íƒìƒ‰ëœ ì •ì ì˜ ì¸ë±ìŠ¤ì™€ ê·¸ ê±°ë¦¬ë¥¼ ì €ì¥í•œë‹¤. íŠ¹ìˆ˜ ë©”ì„œë“¤ë¥¼ ì‚¬ìš©í•´ ê±°ë¦¬ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë¹„êµí•˜ëŠ” ê¸°ëŠ¥ì„ ì¶”ê°€í•œë‹¤. 
- distances ë¦¬ìŠ¤íŠ¸ëŠ” rootì—ì„œ ê° ì •ì ê¹Œì§€ì˜ ê±°ë¦¬ë¥¼ ì €ì¥í•œë‹¤.
- rootì˜ DijkstraNodeë¥¼ ìš°ì„ ìˆœìœ„ íì— **push**í•œë‹¤.
- ìš°ì„ ìˆœìœ„ íì—ì„œ ê°€ì¥ ê°€ê¹Œìš´ ì •ì ì„ popí•œ ë’¤, í˜„ì¬ ì •ì (u)ìœ¼ë¡œ ì„¤ì •í•œë‹¤. ì´í›„ í˜„ì¬ ì •ì ì— ì—°ê²°ëœ ëª¨ë“  ì´ìŒì„ ì„ ëŒ€ìƒìœ¼ë¡œ íƒìƒ‰ì„ ì‹œë„í•˜ë©°, ìƒˆë¡œìš´ ìµœë‹¨ ê²½ë¡œê°€ ë°œê²¬ë  ë•Œë§ˆë‹¤ ê±°ë¦¬ì™€ ìš°ì„ ìˆœìœ„ íë¥¼ ê°±ì‹ í•œë‹¤. ìš°ì„ ìˆœìœ„ íê°€ ë¹Œ ë•Œê¹Œì§€ ì´ ê³¼ì •ì„ ë°˜ë³µí•œë‹¤.

<u>dijkstra.py (ê³„ì†)</u>

```python
if __name__ == "__main__":
   	 ...
    root = "ë¡œìŠ¤ì•¤ì ¤ë ˆìŠ¤"
    distances, path_dict = dijkstra(city_graph2, root)
    name_distance:Dict[str, Optional[int]] = distance_array_to_vertex_dict(city_graph2, distances)
    print(f"{root}ì—ì„œì˜ ê±°ë¦¬:")
    for key, value in name_distance.items():
        print(f"{key} : {value}")
    print("")

    goal = "ë³´ìŠ¤í„´"
    print(f"{root}ì—ì„œ {goal}ê¹Œì§€ì˜ ìµœë‹¨ ê²½ë¡œ:")
    path:WeightedPath = path_dict_to_path(city_graph2.index_of(root), 
                                          city_graph2.index_of(goal), 
                                          path_dict)
    print_weighted_path(city_graph2, path)
```

**distance_array_to_vertex_dict**ëŠ” í—¬í¼ í•¨ìˆ˜ë¡œ, ì‘ì„±í•œ ê·¸ë˜í”„ë¥¼ ë‹¤ìµìŠ¤íŠ¸ë¼ ì•Œê³ ë¦¬ì¦˜ì˜ ì¸ìë¡œ ë³€í™˜í•œë‹¤. **path_dict_to_path**ëŠ” ë°˜í™˜ê°’ì„ ì¶œë ¥í•œë‹¤(ë„ˆë¹„ ìš°ì„  íƒìƒ‰ì—ì„œ ì‚¬ìš©í–ˆë˜ node_to_path í•¨ìˆ˜ì™€ ìœ ì‚¬).

<s>Console</s>

```
ë¡œìŠ¤ì•¤ì ¤ë ˆìŠ¤ì—ì„œì˜ ê±°ë¦¬:
ì‹œì• í‹€ : 1026     
ìƒŒí”„ë€ì‹œìŠ¤ì½” : 348
ë¡œìŠ¤ì•¤ì ¤ë ˆìŠ¤ : 0  
ë¦¬ë²„ì‚¬ì´ë“œ : 50   
í”¼ë‹‰ìŠ¤ : 357      
ì‹œì¹´ê³  : 1754     
ë³´ìŠ¤í„´ : 2605
ë‰´ìš• : 2474
ì• í‹€ëœíƒ€ : 1965
ë§ˆì´ì• ë¯¸ : 2340
ëŒˆëŸ¬ìŠ¤ : 1244
íœ´ìŠ¤í„´ : 1372
ë””íŠ¸ë¡œì´íŠ¸ : 1992
í•„ë¼ë¸í”¼ì•„ : 2511
ì›Œì‹±í„´ : 2388

ë¡œìŠ¤ì•¤ì ¤ë ˆìŠ¤ì—ì„œ ë³´ìŠ¤í„´ê¹Œì§€ì˜ ìµœë‹¨ ê²½ë¡œ:
ë¡œìŠ¤ì•¤ì ¤ë ˆìŠ¤ 50> ë¦¬ë²„ì‚¬ì´ë“œ
ë¦¬ë²„ì‚¬ì´ë“œ 1704> ì‹œì¹´ê³ 
ì‹œì¹´ê³  238> ë””íŠ¸ë¡œì´íŠ¸
ë””íŠ¸ë¡œì´íŠ¸ 613> ë³´ìŠ¤í„´
ê°€ì¤‘ì¹˜ ì´í•©: 2605
```

---

# ì—°ìŠµë¬¸ì œ

## ì‚¬ì „ ì¤€ë¹„

```python
from __future__ import annotations
from typing import TypeVar, List
from edge import Edge
from graph import Graph

V = TypeVar("V")    # ê·¸ë˜í”„ ì •ì (vertice) íƒ€ì…
```

ê°€ì¤‘ì¹˜ë¥¼ ê³ ë ¤í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ Edgeì™€ Graphë§Œìœ¼ë¡œ ì¶©ë¶„í•˜ë‹¤.

---

## ğŸ“ 4-1

1. *Practice question*

   ê·¸ë˜í”„ í”„ë ˆì„ì›Œí¬ì— ì—ì§€ ë° ì •ì  ì œê±°ë¥¼ ìœ„í•œ ë©”ì„œë“œë¥¼ ì¶”ê°€í•˜ë¼.

<u>ì—°ìŠµë¬¸ì œ 4-1.py</u>

```python
class RemovableGraph(Graph[V]):
    def __init__(self, vertices:List[V] = []) -> None:
        self._vertices:List[V] = vertices
        self._edges:List[List[Edge]] = [[] for _ in vertices]

    def remove_vertex(self, vertex:V) -> None:
        target:int = self._vertices.index(vertex)
        self._edges[target] = []
        self._vertices[target] = None

    def remove_edge(self, edge:Edge) -> None:
        self._edges[edge.u].remove(edge)
        self._edges[edge.v].remove(edge.reversed())

    def remove_edge_by_indices(self, u:int, v:int) -> None:
        edge:Edge = Edge(u, v)
        self.remove_edge(edge)

    def remove_edge_by_vertices(self, first:V, second:V) -> None:
        u:int = self._vertices.index(first)
        v:int = self._vertices.index(second)
        self.remove_edge_by_indices(u, v)

    def neighbors_for_index(self, index:int) -> List[V]:
        return list(filter(lambda x: x, map(self.vertex_at, [e.v for e in self._edges[index]])))

    def __repr__(self) -> str:
        desc:str = ""
        for i in range(self.vertex_count):
            if not self.vertex_at(i):
                continue
            desc += f"{self.vertex_at(i)} -> {self.neighbors_for_index(i)}\n"
        return desc
```

Graph í´ë˜ìŠ¤ë¥¼ ì¬ì •ì˜í•œ **RemovableGraph**ëŠ” ì •ì ê³¼ ì´ìŒì„ ì„ ì œê±°í•˜ëŠ” ê¸°ëŠ¥ì„ ì¶”ê°€ë¡œ ìˆ˜í–‰í•œë‹¤. ë¦¬ìŠ¤íŠ¸ ê°ì²´ì˜ append ë©”ì„œë“œì™€ ë°˜ëŒ€ë¡œ **remove** ë©”ì„œë“œëŠ” í•­ëª©ì„ ì‚­ì œí•˜ë©°, ì´ë¥¼ ì‚¬ìš©í•˜ë©´ ì‚­ì œ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ëŠ” ë©”ì„œë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.

<u>ì—°ìŠµë¬¸ì œ 4-1.py (ê³„ì†)</u>

```python
if __name__ == "__main__":
    ex41:RemovableGraph[str] = RemovableGraph(["A", "B", "C"])

    ex41.add_edge_by_vertices("A", "B")
    ex41.add_edge_by_vertices("B", "C")
    ex41.add_edge_by_vertices("C", "A")
    print(ex41)

    ex41.remove_edge_by_vertices("A", "C")
    print(ex41)
    ex41.remove_vertex("A")
    print(ex41)
```

<s>Console</s>

```
A -> ['B', 'C']
B -> ['A', 'C']
C -> ['B', 'A']

A -> ['B']
B -> ['A', 'C']
C -> ['B']

B -> ['C']
C -> ['B']
```

### ì‹œí–‰ì°©ì˜¤

```python
def remove_vertex(self, vertex:V) -> None:
    target:int = self._vertices.index(vertex)
    del self._edges[target]
    del self._vertices[target]
```

ì²˜ìŒì—ëŠ” **del**ì„ ì‚¬ìš©í•´ ë¦¬ìŠ¤íŠ¸ì—ì„œ í•­ëª©ì„ ì œê±°í•˜ëŠ” ë°©ì‹ì„ ì‹œë„í–ˆì§€ë§Œ, **neighbors_for_index** ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ê³¼ì •ì—ì„œ **list index out of range** ì˜¤ë¥˜ê°€ ë°œìƒí–ˆë‹¤. ë¦¬ìŠ¤íŠ¸ì˜ í¬ê¸°ë¥¼ ë³€í™”ì‹œí‚¤ëŠ” ëŒ€ì‹ , ì‚­ì œëœ ê³µê°„ì„ ë¹„ì›Œë‘ê¸°ë¡œ í–ˆë‹¤.

```python
def remove_vertex(self, vertex:V) -> None:
    target:int = self._vertices.index(vertex)
    self._edges[target] = []
    self._vertices[target] = None
```

```
...
None -> []
B -> [None, 'C']
C -> ['B']
```

ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ì§€ë§Œ, ë³„ë¡œ ë³´ê¸° ì¢‹ì€ ì¶œë ¥ í˜•íƒœëŠ” ì•„ë‹ˆë¯€ë¡œ Noneì„ ì œì™¸í•˜ê³  ì¶œë ¥í•˜ê²Œë” ìˆ˜ì •í•œë‹¤. ë‹¤ìŒê³¼ ê°™ì´ \__repr__ íŠ¹ìˆ˜ ë©”ì„œë“œë¥¼ ì¬ì •ì˜í•œë‹¤.

```python
def __repr__(self) -> str:
    desc:str = ""
    for i in range(self.vertex_count):
        if not self.vertex_at(i):
            continue
        desc += f"{self.vertex_at(i)} -> {self.neighbors_for_index(i)}\n"
    return desc
```

```
...
B -> [None, 'C']
C -> ['B']
```

Noneì€ ì¡°ê±´ë¬¸ì—ì„œ Falseë¡œ ì·¨ê¸‰ëœë‹¤. ì •ì ì´ Noneì¸ ê²½ìš° ì¶œë ¥ë˜ì§€ ì•ŠëŠ”ë‹¤. í•˜ì§€ë§Œ ì´ìŒì„ ì˜ ë„ì°© ì •ì (v)ì— ìœ„ì¹˜í•œ Noneì´ ì œê±°ë˜ì§€ ì•Šì•˜ë‹¤. ì´ì›ƒ ì •ì ì„ ë°˜í™˜í•˜ëŠ” **neighbors_for_index** ë©”ì„œë“œë¥¼ ì¬ì •ì˜í•´ì•¼ í•œë‹¤.

```python
def neighbors_for_index(self, index:int) -> List[V]:
    return list(map(self.vertex_at, filter(lambda x: x, [e.v for e in self._edges[index]])))
```

filter í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ ì¡°ê±´ì„ ì œì‹œí•˜ê³ , ë¶€í•©í•˜ëŠ” í•­ëª©ë§Œ ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€í•œë‹¤. ì¡°ê±´ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” í•¨ìˆ˜ëŠ” Noneì„ ì œì™¸í•œ ëª¨ë“  ì¸ìì— ëŒ€í•´ Trueë¥¼ ë°˜í™˜í•œë‹¤.

```
A -> ['B', 'C']
B -> ['C']
C -> ['B']

A -> ['B']
B -> ['C']
C -> ['B']

B -> ['C']
C -> ['B']
```

Noneì€ ë” ì´ìƒ ë³´ì´ì§€ ì•Šì§€ë§Œ, ì¶œë ¥ ê²°ê³¼ê°€ ì¡°ê¸ˆ ì´ìƒí•˜ë‹¤. ì œê±°í•  Noneì€ vertex_at í•¨ìˆ˜ì˜ ë°˜í™˜ê°’ì¸ë°, ë°˜í™˜ê°’ì´ ì•„ë‹Œ ì¸ìì— ëŒ€í•´ filter í•¨ìˆ˜ë¥¼ ìˆ˜í–‰í–ˆê¸° ë•Œë¬¸ì´ë‹¤. ë”°ë¼ì„œ filter í•¨ìˆ˜ì˜ ìœ„ì¹˜ë¥¼ ì¡°ì •í•œë‹¤.

```python
def neighbors_for_index(self, index:int) -> List[V]:
    return list(filter(lambda x: x, map(self.vertex_at, [e.v for e in self._edges[index]])))
```

---

## ğŸ“ 4-2

1. *Practice question*

   ê·¸ë˜í”„ í”„ë ˆì„ì›Œí¬ì— ìœ í–¥ ê·¸ë˜í”„(digraph)ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì½”ë“œë¥¼ ì¶”ê°€í•˜ë¼.

<u>ì—°ìŠµë¬¸ì œ 4-2.py</u>

```python
class Digraph(Graph[V]):
    def __init__(self, vertices:List[V] = []) -> None:
        self._vertices:List[V] = vertices
        self._edges:List[List[Edge]] = [[] for _ in vertices]

    def add_edge(self, edge:Edge) -> None:
        self._edges[edge.u].append(edge)
        # self._edges[edge.v].append(edge.reversed())
```

ì—­ë°©í–¥ì˜ ì´ìŒì„ ì„ ì¶”ê°€í•˜ëŠ” ì¤„ë§Œ ì œê±°í•˜ë©´ ê°„ë‹¨í•˜ê²Œ í•´ê²°í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ ì´ë ‡ê²Œ ëë‚´ê¸°ëŠ” ì•„ì‰¬ìš°ë‹ˆ ì¡°ê¸ˆì˜ ê¸°ëŠ¥ ê°œì„ ì„ ì‹œë„í•´ ë³´ì.

```python
if __name__ == "__main__":
    ex42:Digraph[str] = Digraph(["A", "B", "C"])

    ex42.add_edge_by_vertices("A", "B")
    ex42.add_edge_by_vertices("A", "C")
    ex42.add_edge_by_vertices("B", "A")
    ex42.add_edge_by_vertices("B", "C")
    ex42.add_edge_by_vertices("C", "A")
    ex42.add_edge_by_vertices("C", "B")

    print(ex42)
```

Digraphì—ì„œëŠ” ì–‘ë°©í–¥(ë¬´í–¥) ë°©ì‹ì´ ì•„ë‹Œ ë‹¨ë°©í–¥(ìœ í–¥) ë°©ì‹ìœ¼ë¡œ ì´ìŒì„ ì„ ì¶”ê°€í•œë‹¤. í•˜ì§€ë§Œ ë§Œì•½ ë‘ ì •ì  Aì™€ Bë¥¼ ì—°ê²°í•˜ëŠ” ì´ìŒì„ ì´ ì–‘ë°©í–¥ì´ë¼ë©´, ë‘ ì¤„ì— ê±¸ì¹œ ì‘ì—…ì„ í•´ì•¼ í•˜ë¯€ë¡œ ìƒë‹¹íˆ ë²ˆê±°ë¡­ë‹¤. **add_edge_by_vertices**ì— ë§¤ê°œë³€ìˆ˜ë¥¼ ì¶”ê°€í•´ Trueì¼ ê²½ìš° ì–‘ë°©í–¥, Falseì¼ ê²½ìš° ë‹¨ë°©í–¥ìœ¼ë¡œ ì´ìŒì„ ì„ ì¶”ê°€í•˜ë„ë¡ ë³€ê²½í•œë‹¤ë©´ ë¶ˆí•„ìš”í•œ ì‘ì—…ì„ ì¤„ì¼ ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.

```python
class Digraph(Graph[V]):
    def __init__(self, vertices:List[V] = []) -> None:
        self._vertices:List[V] = vertices
        self._edges:List[List[Edge]] = [[] for _ in vertices]

    def add_edge(self, edge:Edge, direction:bool = False) -> None:
        self._edges[edge.u].append(edge)
        if not direction:
            self._edges[edge.v].append(edge.reversed())

    def add_edge_by_indices(self, u:int, v:int, direction:bool = False) -> None:
        edge:Edge = Edge(u, v)
        self.add_edge(edge, direction)

    def add_edge_by_vertices(self, first:V, second:V, direction:bool = False) -> None:
        u:int = self._vertices.index(first)
        v:int = self._vertices.index(second)
        self.add_edge_by_indices(u, v, direction)
```

ì´ìŒì„ ì€ **direction** ë§¤ê°œë³€ìˆ˜ê°€ Trueì¼ ë•Œ ë‹¨ë°©í–¥, Falseì¼ ë•Œ ì–‘ë°©í–¥ ì„±ì§ˆì„ ê°–ëŠ”ë‹¤.

![](https://github.com/B31l/B31l.github.io/blob/master/img/Classic/Edge4.png?raw=true)

ìœ í–¥ ê·¸ë˜í”„ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•´ ìœ„ ê·¸ë¦¼ì„ ì •í˜•í™”í•œë‹¤. Aì™€ C ëŠ” ë¬´í–¥ìœ¼ë¡œ ì—°ê²°ë˜ì–´ ìˆì§€ë§Œ, Bì™€ A, Bì™€ Cì—ëŠ” ì˜¤ì§ í•˜ë‚˜ì˜ ë°©í–¥ë§Œ ì¡´ì¬í•œë‹¤.

<u>ì—°ìŠµë¬¸ì œ 4-2.py (ê³„ì†)</u>

```python
if __name__ == "__main__":
    ex42:Digraph[str] = Digraph(["A", "B", "C"])

    ex42.add_edge_by_vertices("A", "C", False)  # ë¬´í–¥
    ex42.add_edge_by_vertices("B", "A", True)   # ìœ í–¥
    ex42.add_edge_by_vertices("B", "C", True)   # ìœ í–¥

    print(ex42)
```

<s>Console</s>

```
A -> ['C']
B -> ['A', 'C']
C -> ['A']
```

---

## ğŸ“ 4-3

1. *Practice question*

   ê·¸ë˜í”„ í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ìœ„í‚¤í”¼ë””ì•„ ì„¤ëª…ë˜ì–´ ìˆëŠ” ê²ƒê³¼ ê°™ì€ [ì¾¨ë‹ˆíˆìŠ¤ë² ë¥´í¬ ë‹¤ë¦¬ ê±´ë„ˆê¸° ë¬¸ì œ](https://namu.wiki/w/%EC%BE%A8%EB%8B%88%ED%9E%88%EC%8A%A4%EB%B2%A0%EB%A5%B4%ED%81%AC%20%EB%8B%A4%EB%A6%AC%20%EA%B1%B4%EB%84%88%EA%B8%B0%20%EB%AC%B8%EC%A0%9C)ë¥¼ ì¦ëª… ë˜ëŠ” ë°˜ì¦í•˜ë¼.

![](https://github.com/B31l/B31l.github.io/blob/master/img/Classic/Edge5.png?raw=true)

ì¾¨ë‹ˆíˆìŠ¤ë² ë¥´í¬ ë‹¤ë¦¬ ë¬¸ì œë¥¼ ì •ì  A, B, C, Dì™€ ì´ìŒì„ a, b, c, d, e, f, gë¥¼ ê°–ëŠ” ë¬´í–¥ ë¹„ê°€ì¤‘ ê·¸ë˜í”„ë¡œ ì •í˜•í™”í•œë‹¤. ì´ ê·¸ë˜í”„ëŠ” íŠ¹ì´í•˜ê²Œë„ ë‘ ì •ì ì„ ì—°ê²°í•˜ëŠ” ì´ìŒì„ ì´ ì—¬ëŸ¬ ê°œ ì¡´ì¬í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´, Aì™€ Bë¥¼ ì—°ê²°í•˜ëŠ” ì´ìŒì„ ì€ a, bë¡œ ë‘ ê°œ ì¡´ì¬í•œë‹¤. ì´ëŸ¬í•œ ê·¸ë˜í”„ë¥¼ **ë‹¤ì¤‘ ê·¸ë˜í”„**(multigraph)ë¼ê³  í•œë‹¤. ë‹¤ì¤‘ ê·¸ë˜í”„ë¥¼ ì§€ì›í•˜ë„ë¡ ì¬ì •ì˜í•œë‹¤. 

<u>ì—°ìŠµë¬¸ì œ 4-3.py</u>

```python
@dataclass
class bridgeEdge(Edge):
    id:int  # ì‹ë³„ì

    def reversed(self) -> bridgeEdge:
        return Edge(self.v, self.u, self.id)

    def __repr__(self) -> str:
        return f"<{self.id}> {self.u} -> {self.v}"


class BridgeGraph(Graph[V]):
    def __init__(self, vertices:List[V] = []) -> None:
        self._vertices:List[V] = vertices
        self._edges:List[List[BridgeEdge]] = [[] for _ in vertices]

    def add_edge_by_indices(self, u:int, v:int, name:str) -> None:
        edge:BridgeEdge = BridgeEdge(u, v, name)
        self.add_edge(edge)

    def add_edge_by_vertices(self, first:V, second:V, name:str) -> None:
        u:int = self._vertices.index(first)
        v:int = self._vertices.index(second)
        self.add_edge_by_indices(u, v, name)
```

ì´ìŒì„ ì„ êµ¬ë¶„í•˜ê¸° ìœ„í•œ ì´ë¦„ ì†ì„±ì„ ì¶”ê°€í•œë‹¤.

<u>ì—°ìŠµë¬¸ì œ 4-3.py (ê³„ì†)</u>

```python
if __name__ == "__main__":
    ex43:BridgeGraph[str] = BridgeGraph(["A", "B", "C", "D"])
                                   
    ex43.add_edge_by_vertices("A", "B", "a")
    ex43.add_edge_by_vertices("A", "B", "b")
    ex43.add_edge_by_vertices("A", "C", "c")
    ex43.add_edge_by_vertices("A", "C", "d")
    ex43.add_edge_by_vertices("A", "D", "e")
    ex43.add_edge_by_vertices("B", "D", "f")
    ex43.add_edge_by_vertices("C", "D", "g")

    print(ex43)
```

```
A -> ['B', 'B', 'C', 'C', 'D']
B -> ['A', 'A', 'D']
C -> ['A', 'A', 'D']
D -> ['A', 'B', 'C']
```

ì¬ê·€ë¥¼ ì‚¬ìš©í•œ ë°±íŠ¸ë˜í‚¹ì„ ì‹œë„í•œë‹¤.

```python
if __name__ == "__main__":
    ex43:BridgeGraph[str] = BridgeGraph(["A", "B", "C", "D"])
    ex43.add_edge_by_vertices("A", "B", "a")
    ex43.add_edge_by_vertices("A", "B", "b")
    ex43.add_edge_by_vertices("A", "C", "c")
    ex43.add_edge_by_vertices("A", "C", "d")
    ex43.add_edge_by_vertices("A", "D", "e")
    ex43.add_edge_by_vertices("B", "D", "f")
    ex43.add_edge_by_vertices("C", "D", "g")
    print(ex43)
```

ì¾¨ë‹ˆíˆìŠ¤ë² ë¥´í¬ ë‹¤ë¦¬ ë¬¸ì œë¥¼ í”„ë ˆì„ì›Œí¬ì— ì…ë ¥í•œë‹¤.

```python
...
def visit(current:BridgeEdge, explored:List[BridgeEdge]):

    # ì¢…ë£Œ ì¡°ê±´: ëª¨ë“  ë‹¤ë¦¬ë¥¼ í•œ ë²ˆì”© ê±´ë„Œë‹¤.
    if len(explored) == (ex43.edge_count / 2):
        print(explored) # ì¶œë ¥
        exit()          # ì¢…ë£Œ
        
    # ì´ë™ ê°€ëŠ¥í•œ ê³³
    promise:List[BridgeEdge] = list(filter(lambda x: False if (x.name in current.name) else True, 
                                            ex43.edges_by_edge(current)))

    print(f"-----{current}-------------------------")
    print(f"ì´ë¯¸ ì§€ë‚œ ê³³: {explored}")
    print(f"ì´ë™ ê°€ëŠ¥í•œ ê³³: {promise}")

    # promiseì˜ ëª¨ë“  BridgeEdgeì— ëŒ€í•œ íƒìƒ‰ ì‹œí–‰
    for edge in promise:

        # ê±´ë„ ìˆ˜ ì—†ìœ¼ë©´ continue
        if edge.name in explored:
            print(f"{edge.name} -> ë¶ˆê°€ëŠ¥", end=" ")
            continue

        # ê±´ë„ ìˆ˜ ìˆìœ¼ë©´ ì¬ê·€
        print(f"{edge.name} -> ê°€ëŠ¥")
        print(f"{edge.name}ë¡œ ì´ë™í•©ë‹ˆë‹¤.")
        print("\n\n")
        explored.append(edge.name)
        visit(edge, explored)

    # promiseê°€ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ ë˜ì¶”ì 
    explored.remove(current.name)
    print()
```

**promise**ëŠ” í˜„ì¬ ë‹¤ë¦¬ì˜ ë ì •ì ì—ì„œ ê±´ë„ ìˆ˜ ìˆëŠ” ë‹¤ë¦¬ì˜ ë¦¬ìŠ¤íŠ¸ë¥¼ ë°˜í™˜í•œë‹¤.

**explored**ëŠ” ì´ë¯¸ ê±´ë„Œ ë‹¤ë¦¬ì˜ ì´ë¦„ì„ ì €ì¥í•œë‹¤. ì´ ë¦¬ìŠ¤íŠ¸ì˜ í•­ëª©ì€ íƒìƒ‰ì˜ ì œì™¸ ëŒ€ìƒì´ ëœë‹¤.

```python
...
initial = ex43._edges[1][0]
explored:List[str] = [initial.name]
visit(initial, explored)
print("ì‹¤íŒ¨!")  # ì¶œë ¥
```

ì¢…ë£Œ ì¡°ê±´ì„ ë§Œì¡±í•˜ë©´ ê²°ê³¼(ë‹¤ë¦¬ì˜ ì´ë¦„ì´ë©°, ì´ ìˆœì„œëŒ€ë¡œ ê±´ë„ˆë©´ ëœë‹¤)ë¥¼ ì¶œë ¥í•œë‹¤. -> ê°€ëŠ¥í•˜ë‹¤.

ëª¨ë“  í˜¸ì¶œì´ ì‹¤í–‰ë˜ê³  í•¨ìˆ˜ê°€ ì¢…ë£Œë˜ë©´ ì‹¤íŒ¨ ë©”ì„¸ì§€ë¥¼ ì¶œë ¥í•œë‹¤. -> ë¶ˆê°€ëŠ¥í•˜ë‹¤.

<s>Console</s>

```
-----<c> 0 -> 2-------------------------
ì´ë¯¸ ì§€ë‚œ ê³³: ['a', 'e', 'g', 'd', 'c']
ì´ë™ ê°€ëŠ¥í•œ ê³³: [<d> 2 -> 0, <g> 2 -> 3]
d -> ë¶ˆê°€ëŠ¥ g -> ë¶ˆê°€ëŠ¥
e -> ë¶ˆê°€ëŠ¥



ì‹¤íŒ¨!
```

ë”°ë¼ì„œ ì¾¨ë‹ˆíˆìŠ¤ë² ë¥´í¬ ë‹¤ë¦¬ ë¬¸ì œëŠ” í•´ê²°í•  ìˆ˜ ì—†ë‹¤.

### ê²½ë¡œ ì¶”ê°€

Aì™€ D ì‚¬ì´ì— ë‹¤ë¦¬ë¥¼ í•˜ë‚˜ ë” ë†“ìœ¼ë©´ ëª¨ë“  ë‹¤ë¦¬ë¥¼ í•œ ë²ˆì”© ê±´ë„ ìˆ˜ ìˆë‹¤.

```python
if __name__ == "__main__":
    ex43:BridgeGraph[str] = BridgeGraph(["A", "B", "C", "D"])
    ex43.add_edge_by_vertices("A", "B", "a")
    ex43.add_edge_by_vertices("A", "B", "b")
    ex43.add_edge_by_vertices("A", "C", "c")
    ex43.add_edge_by_vertices("A", "C", "d")
    ex43.add_edge_by_vertices("A", "D", "e")
    ex43.add_edge_by_vertices("B", "D", "f")
    ex43.add_edge_by_vertices("C", "D", "g")
    ex43.add_edge_by_vertices("A", "D", "h")    # ì¶”ê°€ëœ ê²½ë¡œ
    print(ex43)
```

ì•„ë˜ëŠ” ìƒˆë¡œìš´ ê²½ë¡œë¥¼ ì¶”ê°€í•œ ë’¤ \<a> 1 -> 0 ë‹¤ë¦¬ì—ì„œ ì‹œì‘í–ˆì„ ë•Œì˜ ê³¼ì • ë° ê²°ê³¼(ì„±ê³µ)ë¥¼ ë‚˜íƒ€ë‚¸ ê²ƒì´ë‹¤. í•œë¶“ê·¸ë¦¬ê¸° ë¬¸ì œì˜ ê²½ìš° ëª¨ë“  ì¡°ê±´ì´ ì„±ê³µìœ¼ë¡œ ì´ì–´ì§€ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤. ë§Œì•½ ì‹¤íŒ¨í•œë‹¤ë©´ ì‹œì‘ ì •ì ê³¼ ì´ìŒì„ ì„ ë‹¤ë¥´ê²Œ ì„¤ì •í•´ì•¼ í•œë‹¤(forë¬¸ì„ ì‚¬ìš©í•˜ë©´ ëª¨ë“  ì¡°ê±´ì— ëŒ€í•´ í•œ ë²ˆì— íƒìƒ‰ ê°€ëŠ¥). 

<s>Console</s>

```
-----<a> 1 -> 0-------------------------
ì´ë¯¸ ì§€ë‚œ ê³³: ['a']
ì´ë™ ê°€ëŠ¥í•œ ê³³: [<b> 0 -> 1, <c> 0 -> 2, <d> 0 -> 2, <e> 0 -> 3, <h> 0 -> 3]
b -> ê°€ëŠ¥
bë¡œ ì´ë™í•©ë‹ˆë‹¤.



-----<b> 0 -> 1-------------------------
ì´ë¯¸ ì§€ë‚œ ê³³: ['a', 'b']
ì´ë™ ê°€ëŠ¥í•œ ê³³: [<a> 1 -> 0, <f> 1 -> 3]
a -> ë¶ˆê°€ëŠ¥ f -> ê°€ëŠ¥
fë¡œ ì´ë™í•©ë‹ˆë‹¤.



-----<f> 1 -> 3-------------------------
ì´ë¯¸ ì§€ë‚œ ê³³: ['a', 'b', 'f']
ì´ë™ ê°€ëŠ¥í•œ ê³³: [<e> 3 -> 0, <g> 3 -> 2, <h> 3 -> 0]
e -> ê°€ëŠ¥
eë¡œ ì´ë™í•©ë‹ˆë‹¤.



-----<e> 3 -> 0-------------------------
ì´ë¯¸ ì§€ë‚œ ê³³: ['a', 'b', 'f', 'e']
ì´ë™ ê°€ëŠ¥í•œ ê³³: [<a> 0 -> 1, <b> 0 -> 1, <c> 0 -> 2, <d> 0 -> 2, <h> 0 -> 3]
a -> ë¶ˆê°€ëŠ¥ b -> ë¶ˆê°€ëŠ¥ c -> ê°€ëŠ¥
cë¡œ ì´ë™í•©ë‹ˆë‹¤.



-----<c> 0 -> 2-------------------------
ì´ë¯¸ ì§€ë‚œ ê³³: ['a', 'b', 'f', 'e', 'c']
ì´ë™ ê°€ëŠ¥í•œ ê³³: [<d> 2 -> 0, <g> 2 -> 3]
d -> ê°€ëŠ¥
dë¡œ ì´ë™í•©ë‹ˆë‹¤.



-----<d> 2 -> 0-------------------------
ì´ë¯¸ ì§€ë‚œ ê³³: ['a', 'b', 'f', 'e', 'c', 'd']
ì´ë™ ê°€ëŠ¥í•œ ê³³: [<a> 0 -> 1, <b> 0 -> 1, <c> 0 -> 2, <e> 0 -> 3, <h> 0 -> 3]
a -> ë¶ˆê°€ëŠ¥ b -> ë¶ˆê°€ëŠ¥ c -> ë¶ˆê°€ëŠ¥ e -> ë¶ˆê°€ëŠ¥ h -> ê°€ëŠ¥
hë¡œ ì´ë™í•©ë‹ˆë‹¤.



-----<h> 0 -> 3-------------------------
ì´ë¯¸ ì§€ë‚œ ê³³: ['a', 'b', 'f', 'e', 'c', 'd', 'h']
ì´ë™ ê°€ëŠ¥í•œ ê³³: [<e> 3 -> 0, <f> 3 -> 1, <g> 3 -> 2]
e -> ë¶ˆê°€ëŠ¥ f -> ë¶ˆê°€ëŠ¥ g -> ê°€ëŠ¥
gë¡œ ì´ë™í•©ë‹ˆë‹¤.



['a', 'b', 'f', 'e', 'c', 'd', 'h', 'g']
```

> *Note*
>
> ì—°ê²°ëœ ì´ìŒì„ ì˜ ê°œìˆ˜ê°€ í™€ìˆ˜ì¸ ì •ì ì„ **í™€ìˆ˜ì **, ê·¸ë ‡ì§€ ì•Šì€ ì •ì ì„ ì§ìˆ˜ì ì´ë¼ê³  í•œë‹¤. í•œë¶“ê·¸ë¦¬ê¸° ë¬¸ì œëŠ” í™€ìˆ˜ì ì˜ ê°œìˆ˜ì— ë”°ë¼ í•´ê²° ì—¬ë¶€ê°€ ë‹¬ë¼ì§„ë‹¤.
>
> | í™€ìˆ˜ì ì˜ ê°œìˆ˜ | í•´ê²° ì—¬ë¶€                       |
> | ------------- | ------------------------------- |
> | 0             | ê°€ëŠ¥(ì–´ëŠ ì ì—ì„œ ì¶œë°œí•´ë„ ë¬´ê´€) |
> | 2             | ê°€ëŠ¥(í™€ìˆ˜ì  -> ë‹¤ë¥¸ í™€ìˆ˜ì )     |
> | 4 ì´ìƒ        | ë¶ˆê°€ëŠ¥                          |

